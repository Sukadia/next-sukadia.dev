(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{7089:function(e,t){/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */!function(e){"use strict";let Semver=class Semver{constructor(e){let[t,r]=e.split("-"),i=t.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=r?r:null}toString(){let e=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[e,this.prerelease].join("-"):e}};let BladeApi=class BladeApi{constructor(e){this.controller_=e}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(e){this.controller_.viewProps.set("hidden",e)}dispose(){this.controller_.viewProps.set("disposed",!0)}};let TpEvent=class TpEvent{constructor(e){this.target=e}};let TpChangeEvent=class TpChangeEvent extends TpEvent{constructor(e,t,r,i){super(e),this.value=t,this.presetKey=r,this.last=null==i||i}};let TpUpdateEvent=class TpUpdateEvent extends TpEvent{constructor(e,t,r){super(e),this.value=t,this.presetKey=r}};let TpFoldEvent=class TpFoldEvent extends TpEvent{constructor(e,t){super(e),this.expanded=t}};let TpTabSelectEvent=class TpTabSelectEvent extends TpEvent{constructor(e,t){super(e),this.index=t}};function isEmpty(e){return null==e}function deepEqualsArray(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function isPropertyWritable(e,t){let r=e;do{let e=Object.getOwnPropertyDescriptor(r,t);if(e&&(void 0!==e.set||!0===e.writable))return!0;r=Object.getPrototypeOf(r)}while(null!==r);return!1}let t={alreadydisposed:()=>"View has been already disposed",invalidparams:e=>`Invalid parameters for '${e.name}'`,nomatchingcontroller:e=>`No matching controller for '${e.key}'`,nomatchingview:e=>`No matching view for '${JSON.stringify(e.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:e=>`Property '${e.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let TpError=class TpError{static alreadyDisposed(){return new TpError({type:"alreadydisposed"})}static notBindable(){return new TpError({type:"notbindable"})}static propertyNotFound(e){return new TpError({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new TpError({type:"shouldneverhappen"})}constructor(e){var r;this.message=null!==(r=t[e.type](e.context))&&void 0!==r?r:"Unexpected error",this.name=this.constructor.name,this.stack=Error(this.message).stack,this.type=e.type}};let BindingTarget=class BindingTarget{constructor(e,t,r){this.obj_=e,this.key_=t,this.presetKey_=null!=r?r:t}static isBindable(e){return null!==e&&("object"==typeof e||"function"==typeof e)}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(e){this.obj_[this.key_]=e}writeProperty(e,t){let r=this.read();if(!BindingTarget.isBindable(r))throw TpError.notBindable();if(!(e in r))throw TpError.propertyNotFound(e);r[e]=t}};let ButtonApi=class ButtonApi extends BladeApi{get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get title(){var e;return null!==(e=this.controller_.valueController.props.get("title"))&&void 0!==e?e:""}set title(e){this.controller_.valueController.props.set("title",e)}on(e,t){let r=t.bind(this),i=this.controller_.valueController.emitter;return i.on(e,()=>{r(new TpEvent(this))}),this}};let Emitter=class Emitter{constructor(){this.observers_={}}on(e,t){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:t}),this}off(e,t){let r=this.observers_[e];return r&&(this.observers_[e]=r.filter(e=>e.handler!==t)),this}emit(e,t){let r=this.observers_[e];r&&r.forEach(e=>{e.handler(t)})}};function ClassName(e){return(t,r)=>["tp","-",e,"v",t?`_${t}`:"",r?`-${r}`:""].join("")}function compose(e,t){return r=>t(e(r))}function extractValue(e){return e.rawValue}function bindValue(e,t){e.emitter.on("change",compose(extractValue,t)),t(e.rawValue)}function bindValueMap(e,t,r){bindValue(e.value(t),r)}function applyClass(e,t,r){r?e.classList.add(t):e.classList.remove(t)}function valueToClassName(e,t){return r=>{applyClass(e,t,r)}}function bindValueToTextContent(e,t){bindValue(e,e=>{t.textContent=null!=e?e:""})}let r=ClassName("btn");let ButtonView=class ButtonView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(r()),t.viewProps.bindClassModifiers(this.element);let i=e.createElement("button");i.classList.add(r("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;let n=e.createElement("div");n.classList.add(r("t")),bindValueToTextContent(t.props.value("title"),n),this.buttonElement.appendChild(n)}};let ButtonController=class ButtonController{constructor(e,t){this.emitter=new Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new ButtonView(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}};let BoundValue=class BoundValue{constructor(e,t){var r;this.constraint_=null==t?void 0:t.constraint,this.equals_=null!==(r=null==t?void 0:t.equals)&&void 0!==r?r:(e,t)=>e===t,this.emitter=new Emitter,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){let r=null!=t?t:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,n=this.rawValue_,o=!this.equals_(n,i);(o||r.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:n,rawValue:i,sender:this}))}};let PrimitiveValue=class PrimitiveValue{constructor(e){this.emitter=new Emitter,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){let r=null!=t?t:{forceEmit:!1,last:!0},i=this.value_;(i!==e||r.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}};function createValue(e,t){let r=null==t?void 0:t.constraint,i=null==t?void 0:t.equals;return r||i?new BoundValue(e,t):new PrimitiveValue(e)}let ValueMap=class ValueMap{constructor(e){for(let t in this.emitter=new Emitter,this.valMap_=e,this.valMap_){let e=this.valMap_[t];e.emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}}static createCore(e){let t=Object.keys(e);return t.reduce((t,r)=>Object.assign(t,{[r]:createValue(e[r])}),{})}static fromObject(e){let t=this.createCore(e);return new ValueMap(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}};function parseObject(e,t){let r=Object.keys(t),i=r.reduce((r,i)=>{if(void 0===r)return;let n=t[i],o=n(e[i]);return o.succeeded?Object.assign(Object.assign({},r),{[i]:o.value}):void 0},{});return i}function parseArray(e,t){return e.reduce((e,r)=>{if(void 0===e)return;let i=t(r);if(i.succeeded&&void 0!==i.value)return[...e,i.value]},[])}function isObject(e){return null!==e&&"object"==typeof e}function createParamsParserBuilder(e){return t=>r=>{if(!t&&void 0===r)return{succeeded:!1,value:void 0};if(t&&void 0===r)return{succeeded:!0,value:void 0};let i=e(r);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function createParamsParserBuilders(e){return{custom:t=>createParamsParserBuilder(t)(e),boolean:createParamsParserBuilder(e=>"boolean"==typeof e?e:void 0)(e),number:createParamsParserBuilder(e=>"number"==typeof e?e:void 0)(e),string:createParamsParserBuilder(e=>"string"==typeof e?e:void 0)(e),function:createParamsParserBuilder(e=>"function"==typeof e?e:void 0)(e),constant:t=>createParamsParserBuilder(e=>e===t?t:void 0)(e),raw:createParamsParserBuilder(e=>e)(e),object:t=>createParamsParserBuilder(e=>{if(isObject(e))return parseObject(e,t)})(e),array:t=>createParamsParserBuilder(e=>{if(Array.isArray(e))return parseArray(e,t)})(e)}}let i={optional:createParamsParserBuilders(!0),required:createParamsParserBuilders(!1)};function parseParams(e,t){let r=i.required.object(t)(e);return r.succeeded?r.value:void 0}function warnMissing(e){console.warn(`Missing '${e.key}' of ${e.target} in ${e.place}. Please rebuild plugins with the latest core package.`)}function disposeElement(e){return e&&e.parentElement&&e.parentElement.removeChild(e),null}let ReadonlyValue=class ReadonlyValue{constructor(e){this.value_=e}static create(e){return[new ReadonlyValue(e),(t,r)=>{e.setRawValue(t,r)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}};let n=ClassName("");function valueToModifier(e,t){return valueToClassName(e,n(void 0,t))}let ViewProps=class ViewProps extends ValueMap{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=ReadonlyValue.create(createValue(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(t=this.get("parent"))||void 0===t||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,r,i;let n=null!=e?e:{};return new ViewProps(ValueMap.createCore({disabled:null!==(t=n.disabled)&&void 0!==t&&t,disposed:!1,hidden:null!==(r=n.hidden)&&void 0!==r&&r,parent:null!==(i=n.parent)&&void 0!==i?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){bindValue(this.globalDisabled_,valueToModifier(e,"disabled")),bindValueMap(this,"hidden",valueToModifier(e,"hidden"))}bindDisabled(e){bindValue(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){bindValue(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}getGlobalDisabled_(){let e=this.get("parent"),t=!!e&&e.globalDisabled.rawValue;return t||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;let r=e.previousRawValue;null==r||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(t=this.get("parent"))||void 0===t||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};function getAllBladePositions(){return["veryfirst","first","last","verylast"]}let o=ClassName(""),a={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let BladeController=class BladeController{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;let t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{getAllBladePositions().forEach(e=>{t.classList.remove(o(void 0,a[e]))}),this.blade.get("positions").forEach(e=>{t.classList.add(o(void 0,a[e]))})}),this.viewProps.handleDispose(()=>{disposeElement(t)})}get parent(){return this.parent_}set parent(e){if(this.parent_=e,!("parent"in this.viewProps.valMap_)){warnMissing({key:"parent",target:ViewProps.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}};let l="http://www.w3.org/2000/svg";function forceReflow(e){e.offsetHeight}function disableTransitionTemporarily(e,t){let r=e.style.transition;e.style.transition="none",t(),e.style.transition=r}function supportsTouch(e){return void 0!==e.ontouchstart}function getGlobalObject(){return globalThis}function getWindowDocument(){let e=getGlobalObject();return e.document}function getCanvasContext(e){let t=e.ownerDocument.defaultView;return t&&"document"in t?e.getContext("2d",{willReadFrequently:!0}):null}let s={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function createSvgIconElement(e,t){let r=e.createElementNS(l,"svg");return r.innerHTML=s[t],r}function insertElementAt(e,t,r){e.insertBefore(t,e.children[r])}function removeElement(e){e.parentElement&&e.parentElement.removeChild(e)}function removeChildElements(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function removeChildNodes(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])}function findNextTarget(e){return e.relatedTarget?e.relatedTarget:"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}let p=ClassName("lbl");function createLabelNode(e,t){let r=e.createDocumentFragment(),i=t.split("\n").map(t=>e.createTextNode(t));return i.forEach((t,i)=>{i>0&&r.appendChild(e.createElement("br")),r.appendChild(t)}),r}let LabelView=class LabelView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(p()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("div");r.classList.add(p("l")),bindValueMap(t.props,"label",t=>{isEmpty(t)?this.element.classList.add(p(void 0,"nol")):(this.element.classList.remove(p(void 0,"nol")),removeChildNodes(r),r.appendChild(createLabelNode(e,t)))}),this.element.appendChild(r),this.labelElement=r;let i=e.createElement("div");i.classList.add(p("v")),this.element.appendChild(i),this.valueElement=i}};let LabelController=class LabelController extends BladeController{constructor(e,t){let r=t.valueController.viewProps;super(Object.assign(Object.assign({},t),{view:new LabelView(e,{props:t.props,viewProps:r}),viewProps:r})),this.props=t.props,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}};let d={id:"button",type:"blade",accept(e){let t=parseParams(e,{title:i.required.string,view:i.required.constant("button"),label:i.optional.string});return t?{params:t}:null},controller:e=>new LabelController(e.document,{blade:e.blade,props:ValueMap.fromObject({label:e.params.label}),valueController:new ButtonController(e.document,{props:ValueMap.fromObject({title:e.params.title}),viewProps:e.viewProps})}),api:e=>e.controller instanceof LabelController&&e.controller.valueController instanceof ButtonController?new ButtonApi(e.controller):null};let ValueBladeController=class ValueBladeController extends BladeController{constructor(e){super(e),this.value=e.value}};function createBlade(){return new ValueMap({positions:createValue([],{equals:deepEqualsArray})})}let Foldable=class Foldable extends ValueMap{constructor(e){super(e)}static create(e){let t=ValueMap.createCore({completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null});return new Foldable(t)}get styleExpanded(){var e;return null!==(e=this.get("temporaryExpanded"))&&void 0!==e?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";let e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!isEmpty(e)?`${e}px`:"auto"}bindExpandedClass(e,t){let onExpand=()=>{let r=this.styleExpanded;r?e.classList.add(t):e.classList.remove(t)};bindValueMap(this,"expanded",onExpand),bindValueMap(this,"temporaryExpanded",onExpand)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function computeExpandedFolderHeight(e,t){let r=0;return disableTransitionTemporarily(t,()=>{e.set("expandedHeight",null),e.set("temporaryExpanded",!0),forceReflow(t),r=t.clientHeight,e.set("temporaryExpanded",null),forceReflow(t)}),r}function applyHeight(e,t){t.style.height=e.styleHeight}function bindFoldable(e,t){e.value("expanded").emitter.on("beforechange",()=>{if(e.set("completed",!1),isEmpty(e.get("expandedHeight"))){let r=computeExpandedFolderHeight(e,t);r>0&&e.set("expandedHeight",r)}e.set("shouldFixHeight",!0),forceReflow(t)}),e.emitter.on("change",()=>{applyHeight(e,t)}),applyHeight(e,t),t.addEventListener("transitionend",t=>{"height"===t.propertyName&&e.cleanUpTransition()})}let RackLikeApi=class RackLikeApi extends BladeApi{constructor(e,t){super(e),this.rackApi_=t}};function addButtonAsBlade(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function addFolderAsBlade(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function addSeparatorAsBlade(e,t){let r=null!=t?t:{};return e.addBlade(Object.assign(Object.assign({},r),{view:"separator"}))}function addTabAsBlade(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}let NestedOrderedSet=class NestedOrderedSet{constructor(e){this.emitter=new Emitter,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(let t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw TpError.shouldNeverHappen();let r=void 0!==t?t:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);let i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(e=>{this.cache_.add(e)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){let t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);let r=this.extract_(e);r&&(r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};let InputBindingApi=class InputBindingApi extends BladeApi{constructor(e){super(e),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new Emitter,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(e){let t=e.sender.target.read();this.emitter_.emit("change",{event:new TpChangeEvent(this,t,this.controller_.binding.target.presetKey,e.options.last)})}};let InputBindingController=class InputBindingController extends LabelController{constructor(e,t){super(e,t),this.binding=t.binding}};let MonitorBindingApi=class MonitorBindingApi extends BladeApi{constructor(e){super(e),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new Emitter,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(e){let t=e.sender.target.read();this.emitter_.emit("update",{event:new TpUpdateEvent(this,t,this.controller_.binding.target.presetKey)})}};let MonitorBindingController=class MonitorBindingController extends LabelController{constructor(e,t){super(e,t),this.binding=t.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}};function findSubBladeApiSet(e){return e instanceof RackApi?e.apiSet_:e instanceof RackLikeApi?e.rackApi_.apiSet_:null}function getApiByController(e,t){let r=e.find(e=>e.controller_===t);if(!r)throw TpError.shouldNeverHappen();return r}function createBindingTarget(e,t,r){if(!BindingTarget.isBindable(e))throw TpError.notBindable();return new BindingTarget(e,t,r)}let RackApi=class RackApi extends BladeApi{constructor(e,t){super(e),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new Emitter,this.apiSet_=new NestedOrderedSet(findSubBladeApiSet),this.pool_=t;let r=this.controller_.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),r.emitter.on("inputchange",this.onRackInputChange_),r.emitter.on("monitorupdate",this.onRackMonitorUpdate_),r.children.forEach(e=>{this.setUpApi_(e)})}get children(){return this.controller_.rack.children.map(e=>getApiByController(this.apiSet_,e))}addInput(e,t,r){let i=null!=r?r:{},n=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(n,createBindingTarget(e,t,i.presetKey),i),a=new InputBindingApi(o);return this.add(a,i.index)}addMonitor(e,t,r){let i=null!=r?r:{},n=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(n,createBindingTarget(e,t),i),a=new MonitorBindingApi(o);return this.add(a,i.index)}addFolder(e){return addFolderAsBlade(this,e)}addButton(e){return addButtonAsBlade(this,e)}addSeparator(e){return addSeparatorAsBlade(this,e)}addTab(e){return addTabAsBlade(this,e)}add(e,t){this.controller_.rack.add(e.controller_,t);let r=this.apiSet_.find(t=>t.controller_===e.controller_);return r&&this.apiSet_.remove(r),this.apiSet_.add(e),e}remove(e){this.controller_.rack.remove(e.controller_)}addBlade(e){let t=this.controller_.view.element.ownerDocument,r=this.pool_.createBlade(t,e),i=this.pool_.createBladeApi(r);return this.add(i,e.index)}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}setUpApi_(e){let t=this.apiSet_.find(t=>t.controller_===e);t||this.apiSet_.add(this.pool_.createBladeApi(e))}onRackAdd_(e){this.setUpApi_(e.bladeController)}onRackRemove_(e){if(e.isRoot){let t=getApiByController(this.apiSet_,e.bladeController);this.apiSet_.remove(t)}}onRackInputChange_(e){let t=e.bladeController;if(t instanceof InputBindingController){let r=getApiByController(this.apiSet_,t),i=t.binding;this.emitter_.emit("change",{event:new TpChangeEvent(r,i.target.read(),i.target.presetKey,e.options.last)})}else if(t instanceof ValueBladeController){let r=getApiByController(this.apiSet_,t);this.emitter_.emit("change",{event:new TpChangeEvent(r,t.value.rawValue,void 0,e.options.last)})}}onRackMonitorUpdate_(e){if(!(e.bladeController instanceof MonitorBindingController))throw TpError.shouldNeverHappen();let t=getApiByController(this.apiSet_,e.bladeController),r=e.bladeController.binding;this.emitter_.emit("update",{event:new TpUpdateEvent(t,r.target.read(),r.target.presetKey)})}};let FolderApi=class FolderApi extends RackLikeApi{constructor(e,t){super(e,new RackApi(e.rackController,t)),this.emitter_=new Emitter,this.controller_.foldable.value("expanded").emitter.on("change",e=>{this.emitter_.emit("fold",{event:new TpFoldEvent(this,e.sender.rawValue)})}),this.rackApi_.on("change",e=>{this.emitter_.emit("change",{event:e})}),this.rackApi_.on("update",e=>{this.emitter_.emit("update",{event:e})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(e){this.controller_.foldable.set("expanded",e)}get title(){return this.controller_.props.get("title")}set title(e){this.controller_.props.set("title",e)}get children(){return this.rackApi_.children}addInput(e,t,r){return this.rackApi_.addInput(e,t,r)}addMonitor(e,t,r){return this.rackApi_.addMonitor(e,t,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addSeparator(e){return this.rackApi_.addSeparator(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}};let RackLikeController=class RackLikeController extends BladeController{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}};let PlainView=class PlainView{constructor(e,t){let r=ClassName(t.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),t.viewProps.bindClassModifiers(this.element)}};function findInputBindingController(e,t){for(let r=0;r<e.length;r++){let i=e[r];if(i instanceof InputBindingController&&i.binding===t)return i}return null}function findMonitorBindingController(e,t){for(let r=0;r<e.length;r++){let i=e[r];if(i instanceof MonitorBindingController&&i.binding===t)return i}return null}function findValueBladeController(e,t){for(let r=0;r<e.length;r++){let i=e[r];if(i instanceof ValueBladeController&&i.value===t)return i}return null}function findSubRack(e){return e instanceof RackController?e.rack:e instanceof RackLikeController?e.rackController.rack:null}function findSubBladeControllerSet(e){let t=findSubRack(e);return t?t.bcSet_:null}let BladeRack=class BladeRack{constructor(e){var t,r;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new Emitter,this.blade_=null!==(t=e.blade)&&void 0!==t?t:null,null===(r=this.blade_)||void 0===r||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new NestedOrderedSet(findSubBladeControllerSet),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var r;null===(r=e.parent)||void 0===r||r.remove(e),isPropertyWritable(e,"parent")?e.parent=this:(e.parent_=this,warnMissing({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(e,t)}remove(e){isPropertyWritable(e,"parent")?e.parent=null:(e.parent_=null,warnMissing({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(t=>t instanceof e)}onSetAdd_(e){this.updatePositions_();let t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,isRoot:t,sender:this}),!t)return;let r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),r instanceof InputBindingController)r.binding.emitter.on("change",this.onChildInputChange_);else if(r instanceof MonitorBindingController)r.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(r instanceof ValueBladeController)r.value.emitter.on("change",this.onChildValueChange_);else{let e=findSubRack(r);if(e){let t=e.emitter;t.on("layout",this.onDescendantLayout_),t.on("inputchange",this.onDescendantInputChange_),t.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(e){this.updatePositions_();let t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,isRoot:t,sender:this}),!t)return;let r=e.item;if(r instanceof InputBindingController)r.binding.emitter.off("change",this.onChildInputChange_);else if(r instanceof MonitorBindingController)r.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(r instanceof ValueBladeController)r.value.emitter.off("change",this.onChildValueChange_);else{let e=findSubRack(r);if(e){let t=e.emitter;t.off("layout",this.onDescendantLayout_),t.off("inputchange",this.onDescendantInputChange_),t.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){let e=this.bcSet_.items.filter(e=>!e.viewProps.get("hidden")),t=e[0],r=e[e.length-1];this.bcSet_.items.forEach(e=>{let i=[];e===t&&(i.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&i.push("veryfirst")),e===r&&(i.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&i.push("verylast")),e.blade.set("positions",i)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){let e=this.bcSet_.items.filter(e=>e.viewProps.get("disposed"));e.forEach(e=>{this.bcSet_.remove(e)})}onChildInputChange_(e){let t=findInputBindingController(this.find(InputBindingController),e.sender);if(!t)throw TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:t,options:e.options,sender:this})}onChildMonitorUpdate_(e){let t=findMonitorBindingController(this.find(MonitorBindingController),e.sender);if(!t)throw TpError.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:t,sender:this})}onChildValueChange_(e){let t=findValueBladeController(this.find(ValueBladeController),e.sender);if(!t)throw TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:t,options:e.options,sender:this})}onDescendantLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(e){this.emitter.emit("inputchange",{bladeController:e.bladeController,options:e.options,sender:this})}onDescendantMonitorUpdate_(e){this.emitter.emit("monitorupdate",{bladeController:e.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}};let RackController=class RackController extends BladeController{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new PlainView(e,{viewName:"brk",viewProps:t.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);let r=new BladeRack({blade:t.root?void 0:t.blade,viewProps:t.viewProps});r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.rack=r,this.viewProps.handleDispose(()=>{for(let e=this.rack.children.length-1;e>=0;e--){let t=this.rack.children[e];t.viewProps.set("disposed",!0)}})}onRackAdd_(e){e.isRoot&&insertElementAt(this.view.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.isRoot&&removeElement(e.bladeController.view.element)}};let u=ClassName("cnt");let FolderView=class FolderView{constructor(e,t){var r;this.className_=ClassName(null!==(r=t.viewName)&&void 0!==r?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),u()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),bindValueMap(this.foldable_,"completed",valueToClassName(this.element,this.className_(void 0,"cpl")));let i=e.createElement("button");i.classList.add(this.className_("b")),bindValueMap(t.props,"title",e=>{isEmpty(e)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;let n=e.createElement("div");n.classList.add(this.className_("i")),this.element.appendChild(n);let o=e.createElement("div");o.classList.add(this.className_("t")),bindValueToTextContent(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;let a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);let l=t.containerElement;l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}};let FolderController=class FolderController extends RackLikeController{constructor(e,t){var r;let i=Foldable.create(null===(r=t.expanded)||void 0===r||r),n=new RackController(e,{blade:t.blade,root:t.root,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:n,view:new FolderView(e,{containerElement:n.view.element,foldable:i,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=i,bindFoldable(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};let c={id:"folder",type:"blade",accept(e){let t=parseParams(e,{title:i.required.string,view:i.required.constant("folder"),expanded:i.optional.boolean});return t?{params:t}:null},controller:e=>new FolderController(e.document,{blade:e.blade,expanded:e.params.expanded,props:ValueMap.fromObject({title:e.params.title}),viewProps:e.viewProps}),api:e=>e.controller instanceof FolderController?new FolderApi(e.controller,e.pool):null};let LabeledValueController=class LabeledValueController extends ValueBladeController{constructor(e,t){let r=t.valueController.viewProps;super(Object.assign(Object.assign({},t),{value:t.valueController.value,view:new LabelView(e,{props:t.props,viewProps:r}),viewProps:r})),this.props=t.props,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}};let SeparatorApi=class SeparatorApi extends BladeApi{};let h=ClassName("spr");let SeparatorView=class SeparatorView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(h()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("hr");r.classList.add(h("r")),this.element.appendChild(r)}};let SeparatorController=class SeparatorController extends BladeController{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new SeparatorView(e,{viewProps:t.viewProps})}))}};let v={id:"separator",type:"blade",accept(e){let t=parseParams(e,{view:i.required.constant("separator")});return t?{params:t}:null},controller:e=>new SeparatorController(e.document,{blade:e.blade,viewProps:e.viewProps}),api:e=>e.controller instanceof SeparatorController?new SeparatorApi(e.controller):null},m=ClassName("tbi");let TabItemView=class TabItemView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(m()),t.viewProps.bindClassModifiers(this.element),bindValueMap(t.props,"selected",e=>{e?this.element.classList.add(m(void 0,"sel")):this.element.classList.remove(m(void 0,"sel"))});let r=e.createElement("button");r.classList.add(m("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;let i=e.createElement("div");i.classList.add(m("t")),bindValueToTextContent(t.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}};let TabItemController=class TabItemController{constructor(e,t){this.emitter=new Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new TabItemView(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}};let TabPageController=class TabPageController{constructor(e,t){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new TabItemController(e,{props:t.itemProps,viewProps:ViewProps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new RackController(e,{blade:createBlade(),viewProps:ViewProps.create()}),this.props=t.props,bindValueMap(this.props,"selected",e=>{this.itemController.props.set("selected",e),this.contentController.viewProps.set("hidden",!e)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}};let TabPageApi=class TabPageApi{constructor(e,t){this.controller_=e,this.rackApi_=t}get title(){var e;return null!==(e=this.controller_.itemController.props.get("title"))&&void 0!==e?e:""}set title(e){this.controller_.itemController.props.set("title",e)}get selected(){return this.controller_.props.get("selected")}set selected(e){this.controller_.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addSeparator(e){return this.rackApi_.addSeparator(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addInput(e,t,r){return this.rackApi_.addInput(e,t,r)}addMonitor(e,t,r){return this.rackApi_.addMonitor(e,t,r)}addBlade(e){return this.rackApi_.addBlade(e)}};let TabApi=class TabApi extends RackLikeApi{constructor(e,t){super(e,new RackApi(e.rackController,t)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new Emitter,this.pageApiMap_=new Map,this.rackApi_.on("change",e=>{this.emitter_.emit("change",{event:e})}),this.rackApi_.on("update",e=>{this.emitter_.emit("update",{event:e})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(e=>{this.setUpPageApi_(e)})}get pages(){return this.controller_.pageSet.items.map(e=>{let t=this.pageApiMap_.get(e);if(!t)throw TpError.shouldNeverHappen();return t})}addPage(e){let t=this.controller_.view.element.ownerDocument,r=new TabPageController(t,{itemProps:ValueMap.fromObject({selected:!1,title:e.title}),props:ValueMap.fromObject({selected:!1})});this.controller_.add(r,e.index);let i=this.pageApiMap_.get(r);if(!i)throw TpError.shouldNeverHappen();return i}removePage(e){this.controller_.remove(e)}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}setUpPageApi_(e){let t=this.rackApi_.apiSet_.find(t=>t.controller_===e.contentController);if(!t)throw TpError.shouldNeverHappen();let r=new TabPageApi(e,t);this.pageApiMap_.set(e,r)}onPageAdd_(e){this.setUpPageApi_(e.item)}onPageRemove_(e){let t=this.pageApiMap_.get(e.item);if(!t)throw TpError.shouldNeverHappen();this.pageApiMap_.delete(e.item)}onSelect_(e){this.emitter_.emit("select",{event:new TpTabSelectEvent(this,e.rawValue)})}};let Tab=class Tab{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=createValue(!0),this.selectedIndex=createValue(-1),this.items_=[]}add(e,t){let r=null!=t?t:this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){let t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length){this.selectedIndex.rawValue=-1,this.empty.rawValue=!0;return}let e=this.items_.findIndex(e=>e.rawValue);e<0?(this.items_.forEach((e,t)=>{e.rawValue=0===t}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,r)=>{t.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){let t=this.items_.findIndex(t=>t===e.sender);this.items_.forEach((e,r)=>{e.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}};let b=ClassName("tab");let TabView=class TabView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(b(),u()),t.viewProps.bindClassModifiers(this.element),bindValue(t.empty,valueToClassName(this.element,b(void 0,"nop")));let r=e.createElement("div");r.classList.add(b("t")),this.element.appendChild(r),this.itemsElement=r;let i=e.createElement("div");i.classList.add(b("i")),this.element.appendChild(i);let n=t.contentsElement;n.classList.add(b("c")),this.element.appendChild(n),this.contentsElement=n}};let TabController=class TabController extends RackLikeController{constructor(e,t){let r=new RackController(e,{blade:t.blade,viewProps:t.viewProps}),i=new Tab;super({blade:t.blade,rackController:r,view:new TabView(e,{contentsElement:r.view.element,empty:i.empty,viewProps:t.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new NestedOrderedSet(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=i}get pageSet(){return this.pageSet_}add(e,t){this.pageSet_.add(e,t)}remove(e){this.pageSet_.remove(this.pageSet_.items[e])}onPageAdd_(e){let t=e.item;insertElementAt(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(t.contentController,e.index),this.tab.add(t.props.value("selected"))}onPageRemove_(e){let t=e.item;removeElement(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.rackController.rack.remove(t.contentController),this.tab.remove(t.props.value("selected"))}};let g={id:"tab",type:"blade",accept(e){let t=parseParams(e,{pages:i.required.array(i.required.object({title:i.required.string})),view:i.required.constant("tab")});return t&&0!==t.pages.length?{params:t}:null},controller(e){let t=new TabController(e.document,{blade:e.blade,viewProps:e.viewProps});return e.params.pages.forEach(r=>{let i=new TabPageController(e.document,{itemProps:ValueMap.fromObject({selected:!1,title:r.title}),props:ValueMap.fromObject({selected:!1})});t.add(i)}),t},api:e=>e.controller instanceof TabController?new TabApi(e.controller,e.pool):null};function createBladeController(e,t){let r=e.accept(t.params);if(!r)return null;let n=i.optional.boolean(t.params.disabled).value,o=i.optional.boolean(t.params.hidden).value;return e.controller({blade:createBlade(),document:t.document,params:Object.assign(Object.assign({},r.params),{disabled:n,hidden:o}),viewProps:ViewProps.create({disabled:n,hidden:o})})}let ManualTicker=class ManualTicker{constructor(){this.disabled=!1,this.emitter=new Emitter}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}};let IntervalTicker=class IntervalTicker{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Emitter,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;let e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;let e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}};let InputBinding=class InputBinding{constructor(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new Emitter,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}read(){let e=this.target.read();void 0!==e&&(this.value.rawValue=this.reader(e))}write_(e){this.writer(this.target,e)}onValueChange_(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})}};function fillBuffer(e,t){for(;e.length<t;)e.push(void 0)}function initializeBuffer(e){let t=[];return fillBuffer(t,e),createValue(t)}function createTrimmedBuffer(e){let t=e.indexOf(void 0);return t<0?e:e.slice(0,t)}function createPushedBuffer(e,t){let r=[...createTrimmedBuffer(e),t];return r.length>e.length?r.splice(0,r.length-e.length):fillBuffer(r,e.length),r}let MonitorBinding=class MonitorBinding{constructor(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new Emitter,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){let e=this.target.read();if(void 0===e)return;let t=this.value.rawValue,r=this.reader_(e);this.value.rawValue=createPushedBuffer(t,r),this.emitter.emit("update",{rawValue:r,sender:this})}onTick_(e){this.read()}};let CompositeConstraint=class CompositeConstraint{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((e,t)=>t.constrain(e),e)}};function findConstraint(e,t){if(e instanceof t)return e;if(e instanceof CompositeConstraint){let r=e.constraints.reduce((e,r)=>e||(r instanceof t?r:null),null);if(r)return r}return null}let DefiniteRangeConstraint=class DefiniteRangeConstraint{constructor(e){this.values=ValueMap.fromObject({max:e.max,min:e.min})}constrain(e){let t=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),t)}};let ListConstraint=class ListConstraint{constructor(e){this.values=ValueMap.fromObject({options:e})}get options(){return this.values.get("options")}constrain(e){let t=this.values.get("options");if(0===t.length)return e;let r=t.filter(t=>t.value===e).length>0;return r?e:t[0].value}};let RangeConstraint=class RangeConstraint{constructor(e){this.values=ValueMap.fromObject({max:e.max,min:e.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(e){let t=this.values.get("max"),r=this.values.get("min"),i=e;return isEmpty(r)||(i=Math.max(i,r)),isEmpty(t)||(i=Math.min(i,t)),i}};let StepConstraint=class StepConstraint{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){let t=this.origin%this.step,r=Math.round((e-t)/this.step);return t+r*this.step}};let _=ClassName("lst");let ListView=class ListView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(_()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("select");r.classList.add(_("s")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;let i=e.createElement("div");i.classList.add(_("m")),i.appendChild(createSvgIconElement(e,"dropdown")),this.element.appendChild(i),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,bindValueMap(this.props_,"options",t=>{removeChildElements(this.selectElement),t.forEach(t=>{let r=e.createElement("option");r.textContent=t.text,this.selectElement.appendChild(r)}),this.update_()})}update_(){let e=this.props_.get("options").map(e=>e.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}};let ListController=class ListController{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new ListView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){let t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}};let f=ClassName("pop");let PopupView=class PopupView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(f()),t.viewProps.bindClassModifiers(this.element),bindValue(t.shows,valueToClassName(this.element,f(void 0,"v")))}};let PopupController=class PopupController{constructor(e,t){this.shows=createValue(!1),this.viewProps=t.viewProps,this.view=new PopupView(e,{shows:this.shows,viewProps:this.viewProps})}};let w=ClassName("txt");let TextView=class TextView{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(w()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);let r=e.createElement("input");r.classList.add(w("i")),r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){let e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}};let TextController=class TextController{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new TextView(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){let t=e.currentTarget,r=t.value,i=this.parser_(r);isEmpty(i)||(this.value.rawValue=i),this.view.refresh()}};function boolToString(e){return String(e)}function boolFromUnknown(e){return"false"!==e&&!!e}function BooleanFormatter(e){return boolToString(e)}let NumberLiteralNode=class NumberLiteralNode{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};let C={"**":(e,t)=>Math.pow(e,t),"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t,"&":(e,t)=>e&t,"^":(e,t)=>e^t,"|":(e,t)=>e|t};let BinaryOperationNode=class BinaryOperationNode{constructor(e,t,r){this.left=t,this.operator=e,this.right=r}evaluate(){let e=C[this.operator];if(!e)throw Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};let x={"+":e=>e,"-":e=>-e,"~":e=>~e};let UnaryOperationNode=class UnaryOperationNode{constructor(e,t){this.operator=e,this.expression=t}evaluate(){let e=x[this.operator];if(!e)throw Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function combineReader(e){return(t,r)=>{for(let i=0;i<e.length;i++){let n=e[i](t,r);if(""!==n)return n}return""}}function readWhitespace(e,t){var r;let i=e.substr(t).match(/^\s+/);return null!==(r=i&&i[0])&&void 0!==r?r:""}function readNonZeroDigit(e,t){let r=e.substr(t,1);return r.match(/^[1-9]$/)?r:""}function readDecimalDigits(e,t){var r;let i=e.substr(t).match(/^[0-9]+/);return null!==(r=i&&i[0])&&void 0!==r?r:""}function readSignedInteger(e,t){let r=readDecimalDigits(e,t);if(""!==r)return r;let i=e.substr(t,1);if(t+=1,"-"!==i&&"+"!==i)return"";let n=readDecimalDigits(e,t);return""===n?"":i+n}function readExponentPart(e,t){let r=e.substr(t,1);if(t+=1,"e"!==r.toLowerCase())return"";let i=readSignedInteger(e,t);return""===i?"":r+i}function readDecimalIntegerLiteral(e,t){let r=e.substr(t,1);if("0"===r)return r;let i=readNonZeroDigit(e,t);return(t+=i.length,""===i)?"":i+readDecimalDigits(e,t)}function readDecimalLiteral1(e,t){let r=readDecimalIntegerLiteral(e,t);if(t+=r.length,""===r)return"";let i=e.substr(t,1);if(t+=i.length,"."!==i)return"";let n=readDecimalDigits(e,t);return t+=n.length,r+i+n+readExponentPart(e,t)}function readDecimalLiteral2(e,t){let r=e.substr(t,1);if(t+=r.length,"."!==r)return"";let i=readDecimalDigits(e,t);return(t+=i.length,""===i)?"":r+i+readExponentPart(e,t)}function readDecimalLiteral3(e,t){let r=readDecimalIntegerLiteral(e,t);return(t+=r.length,""===r)?"":r+readExponentPart(e,t)}let P=combineReader([readDecimalLiteral1,readDecimalLiteral2,readDecimalLiteral3]);function parseBinaryDigits(e,t){var r;let i=e.substr(t).match(/^[01]+/);return null!==(r=i&&i[0])&&void 0!==r?r:""}function readBinaryIntegerLiteral(e,t){let r=e.substr(t,2);if(t+=r.length,"0b"!==r.toLowerCase())return"";let i=parseBinaryDigits(e,t);return""===i?"":r+i}function readOctalDigits(e,t){var r;let i=e.substr(t).match(/^[0-7]+/);return null!==(r=i&&i[0])&&void 0!==r?r:""}function readOctalIntegerLiteral(e,t){let r=e.substr(t,2);if(t+=r.length,"0o"!==r.toLowerCase())return"";let i=readOctalDigits(e,t);return""===i?"":r+i}function readHexDigits(e,t){var r;let i=e.substr(t).match(/^[0-9a-f]+/i);return null!==(r=i&&i[0])&&void 0!==r?r:""}function readHexIntegerLiteral(e,t){let r=e.substr(t,2);if(t+=r.length,"0x"!==r.toLowerCase())return"";let i=readHexDigits(e,t);return""===i?"":r+i}let y=combineReader([readBinaryIntegerLiteral,readOctalIntegerLiteral,readHexIntegerLiteral]),E=combineReader([y,P]);function parseLiteral(e,t){let r=E(e,t);return(t+=r.length,""===r)?null:{evaluable:new NumberLiteralNode(r),cursor:t}}function parseParenthesizedExpression(e,t){let r=e.substr(t,1);if(t+=r.length,"("!==r)return null;let i=parseExpression(e,t);if(!i)return null;t=i.cursor,t+=readWhitespace(e,t).length;let n=e.substr(t,1);return(t+=n.length,")"!==n)?null:{evaluable:i.evaluable,cursor:t}}function parsePrimaryExpression(e,t){var r;return null!==(r=parseLiteral(e,t))&&void 0!==r?r:parseParenthesizedExpression(e,t)}function parseUnaryExpression(e,t){let r=parsePrimaryExpression(e,t);if(r)return r;let i=e.substr(t,1);if(t+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;let n=parseUnaryExpression(e,t);return n?{cursor:t=n.cursor,evaluable:new UnaryOperationNode(i,n.evaluable)}:null}function readBinaryOperator(e,t,r){r+=readWhitespace(t,r).length;let i=e.filter(e=>t.startsWith(e,r))[0];return i?(r+=i.length,{cursor:r+=readWhitespace(t,r).length,operator:i}):null}function createBinaryOperationExpressionParser(e,t){return(r,i)=>{let n=e(r,i);if(!n)return null;i=n.cursor;let o=n.evaluable;for(;;){let n=readBinaryOperator(t,r,i);if(!n)break;i=n.cursor;let a=e(r,i);if(!a)return null;i=a.cursor,o=new BinaryOperationNode(n.operator,o,a.evaluable)}return o?{cursor:i,evaluable:o}:null}}let V=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((e,t)=>createBinaryOperationExpressionParser(e,t),parseUnaryExpression);function parseExpression(e,t){return t+=readWhitespace(e,t).length,V(e,t)}function parseEcmaNumberExpression(e){let t=parseExpression(e,0);if(!t)return null;let r=t.cursor+readWhitespace(e,t.cursor).length;return r!==e.length?null:t.evaluable}function parseNumber(e){var t;let r=parseEcmaNumberExpression(e);return null!==(t=null==r?void 0:r.evaluate())&&void 0!==t?t:null}function numberFromUnknown(e){if("number"==typeof e)return e;if("string"==typeof e){let t=parseNumber(e);if(!isEmpty(t))return t}return 0}function numberToString(e){return String(e)}function createNumberFormatter(e){return t=>t.toFixed(Math.max(Math.min(e,20),0))}let k=createNumberFormatter(0);function formatPercentage(e){return k(e)+"%"}function stringFromUnknown(e){return String(e)}function formatString(e){return e}function connectValues({primary:e,secondary:t,forward:r,backward:i}){let n=!1;function preventFeedback(e){n||(n=!0,e(),n=!1)}e.emitter.on("change",i=>{preventFeedback(()=>{t.setRawValue(r(e,t),i.options)})}),t.emitter.on("change",n=>{preventFeedback(()=>{e.setRawValue(i(e,t),n.options)}),preventFeedback(()=>{t.setRawValue(r(e,t),n.options)})}),preventFeedback(()=>{t.setRawValue(r(e,t),{forceEmit:!1,last:!0})})}function getStepForKey(e,t){let r=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+r:t.downKey?-r:0}function getVerticalStepKeys(e){return{altKey:e.altKey,downKey:"ArrowDown"===e.key,shiftKey:e.shiftKey,upKey:"ArrowUp"===e.key}}function getHorizontalStepKeys(e){return{altKey:e.altKey,downKey:"ArrowLeft"===e.key,shiftKey:e.shiftKey,upKey:"ArrowRight"===e.key}}function isVerticalArrowKey(e){return"ArrowUp"===e||"ArrowDown"===e}function isArrowKey(e){return isVerticalArrowKey(e)||"ArrowLeft"===e||"ArrowRight"===e}function computeOffset$1(e,t){var r,i;let n=t.ownerDocument.defaultView,o=t.getBoundingClientRect();return{x:e.pageX-((null!==(r=n&&n.scrollX)&&void 0!==r?r:0)+o.left),y:e.pageY-((null!==(i=n&&n.scrollY)&&void 0!==i?i:0)+o.top)}}let PointerHandler=class PointerHandler{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Emitter,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){let t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus();let r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(computeOffset$1(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(computeOffset$1(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){let t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(computeOffset$1(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();let t=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){let t=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;let r=null!==(t=e.targetTouches.item(0))&&void 0!==t?t:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}};function mapRange(e,t,r,i,n){return i+(e-t)/(r-t)*(n-i)}function getDecimalDigits(e){let t=String(e.toFixed(10)),r=t.split(".")[1];return r.replace(/0+$/,"").length}function constrainRange(e,t,r){return Math.min(Math.max(e,t),r)}let S=ClassName("txt");let NumberTextView=class NumberTextView{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(S(),S(void 0,"num")),t.arrayPosition&&this.element.classList.add(S(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("input");r.classList.add(S("i")),r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(S()),this.inputElement.classList.add(S("i"));let i=e.createElement("div");i.classList.add(S("k")),this.element.appendChild(i),this.knobElement=i;let n=e.createElementNS(l,"svg");n.classList.add(S("g")),this.knobElement.appendChild(n);let o=e.createElementNS(l,"path");o.classList.add(S("gb")),n.appendChild(o),this.guideBodyElem_=o;let a=e.createElementNS(l,"path");a.classList.add(S("gh")),n.appendChild(a),this.guideHeadElem_=a;let s=e.createElement("div");s.classList.add(ClassName("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(null===e.rawValue){this.element.classList.remove(S(void 0,"drg"));return}this.element.classList.add(S(void 0,"drg"));let t=e.rawValue/this.props_.get("draggingScale"),r=t+(t>0?-1:t<0?1:0),i=constrainRange(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",`M ${r+i},0 L${r},4 L${r+i},8 M ${t},-1 L${t},9`),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);let n=this.props_.get("formatter");this.tooltipElem_.textContent=n(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){let e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}};let NumberTextController=class NumberTextController{constructor(e,t){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=null!==(r=t.sliderProps)&&void 0!==r?r:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=createValue(null),this.view=new NumberTextView(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);let i=new PointerHandler(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,r;let i=null===(t=this.sliderProps_)||void 0===t?void 0:t.get("minValue"),n=null===(r=this.sliderProps_)||void 0===r?void 0:r.get("maxValue"),o=e;return void 0!==i&&(o=Math.max(o,i)),void 0!==n&&(o=Math.min(o,n)),o}onInputChange_(e){let t=e.currentTarget,r=t.value,i=this.parser_(r);isEmpty(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){let t=getStepForKey(this.baseStep_,getVerticalStepKeys(e));0!==t&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){let t=getStepForKey(this.baseStep_,getVerticalStepKeys(e));0!==t&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;let t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))}onPointerMove_(e){let t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){let t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};let T=ClassName("sld");let SliderView=class SliderView{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(T()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("div");r.classList.add(T("t")),t.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;let i=e.createElement("div");i.classList.add(T("k")),this.trackElement.appendChild(i),this.knobElement=i,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){let e=constrainRange(mapRange(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}};let SliderController=class SliderController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new SliderView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(mapRange(constrainRange(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){let t=getStepForKey(this.baseStep_,getHorizontalStepKeys(e));0!==t&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){let t=getStepForKey(this.baseStep_,getHorizontalStepKeys(e));0!==t&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};let R=ClassName("sldtxt");let SliderTextView=class SliderTextView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(R());let r=e.createElement("div");r.classList.add(R("s")),this.sliderView_=t.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);let i=e.createElement("div");i.classList.add(R("t")),this.textView_=t.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}};let SliderTextController=class SliderTextController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new SliderController(e,{baseStep:t.baseStep,props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new NumberTextController(e,{baseStep:t.baseStep,parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new SliderTextView(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}};function writePrimitive(e,t){e.write(t)}function parseListOptions(e){return Array.isArray(e)?i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))(e).value:"object"==typeof e?i.required.raw(e).value:void 0}function parsePickerLayout(e){if("inline"===e||"popup"===e)return e}function parsePointDimensionParams(e){return i.required.object({max:i.optional.number,min:i.optional.number,step:i.optional.number})(e).value}function normalizeListOptions(e){if(Array.isArray(e))return e;let t=[];return Object.keys(e).forEach(r=>{t.push({text:r,value:e[r]})}),t}function createListConstraint(e){return isEmpty(e)?null:new ListConstraint(normalizeListOptions(e))}function findStep(e){let t=e?findConstraint(e,StepConstraint):null;return t?t.step:null}function getSuitableDecimalDigits(e,t){let r=e&&findConstraint(e,StepConstraint);return r?getDecimalDigits(r.step):Math.max(getDecimalDigits(t),2)}function getBaseStep(e){let t=findStep(e);return null!=t?t:1}function getSuitableDraggingScale(e,t){var r;let i=e&&findConstraint(e,StepConstraint),n=Math.abs(null!==(r=null==i?void 0:i.step)&&void 0!==r?r:t);return 0===n?.1:Math.pow(10,Math.floor(Math.log10(n))-1)}let M=ClassName("ckb");let CheckboxView=class CheckboxView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(M()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("label");r.classList.add(M("l")),this.element.appendChild(r);let i=e.createElement("input");i.classList.add(M("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,t.viewProps.bindDisabled(this.inputElement);let n=e.createElement("div");n.classList.add(M("w")),r.appendChild(n);let o=createSvgIconElement(e,"check");n.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}};let CheckboxController=class CheckboxController{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new CheckboxView(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){let t=e.currentTarget;this.value.rawValue=t.checked}};function createConstraint$6(e){let t=[],r=createListConstraint(e.options);return r&&t.push(r),new CompositeConstraint(t)}let L={id:"input-bool",type:"input",accept:(e,t)=>{if("boolean"!=typeof e)return null;let r=parseParams(t,{options:i.optional.custom(parseListOptions)});return r?{initialValue:e,params:r}:null},binding:{reader:e=>boolFromUnknown,constraint:e=>createConstraint$6(e.params),writer:e=>writePrimitive},controller:e=>{let t=e.document,r=e.value,i=e.constraint,n=i&&findConstraint(i,ListConstraint);return n?new ListController(t,{props:new ValueMap({options:n.values.value("options")}),value:r,viewProps:e.viewProps}):new CheckboxController(t,{value:r,viewProps:e.viewProps})}},A=ClassName("col");let ColorView=class ColorView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(A()),t.foldable.bindExpandedClass(this.element,A(void 0,"expanded")),bindValueMap(t.foldable,"completed",valueToClassName(this.element,A(void 0,"cpl")));let r=e.createElement("div");r.classList.add(A("h")),this.element.appendChild(r);let i=e.createElement("div");i.classList.add(A("s")),r.appendChild(i),this.swatchElement=i;let n=e.createElement("div");if(n.classList.add(A("t")),r.appendChild(n),this.textElement=n,"inline"===t.pickerLayout){let t=e.createElement("div");t.classList.add(A("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}};function rgbToHslInt(e,t,r){let i=constrainRange(e/255,0,1),n=constrainRange(t/255,0,1),o=constrainRange(r/255,0,1),a=Math.max(i,n,o),l=Math.min(i,n,o),s=a-l,p=0,d=0;return 0!==s&&(d=s/(1-Math.abs(a+l-1)),p=(p=i===a?(n-o)/s:n===a?2+(o-i)/s:4+(i-n)/s)/6+(p<0?1:0)),[360*p,100*d,100*((l+a)/2)]}function hslToRgbInt(e,t,r){let i,n,o;let a=(e%360+360)%360,l=constrainRange(t/100,0,1),s=constrainRange(r/100,0,1),p=(1-Math.abs(2*s-1))*l,d=p*(1-Math.abs(a/60%2-1)),u=s-p/2;return a>=0&&a<60?[i,n,o]=[p,d,0]:a>=60&&a<120?[i,n,o]=[d,p,0]:a>=120&&a<180?[i,n,o]=[0,p,d]:a>=180&&a<240?[i,n,o]=[0,d,p]:a>=240&&a<300?[i,n,o]=[d,0,p]:[i,n,o]=[p,0,d],[(i+u)*255,(n+u)*255,(o+u)*255]}function rgbToHsvInt(e,t,r){let i=constrainRange(e/255,0,1),n=constrainRange(t/255,0,1),o=constrainRange(r/255,0,1),a=Math.max(i,n,o),l=a-Math.min(i,n,o);return[0===l?0:a===i?60*(((n-o)/l%6+6)%6):a===n?60*((o-i)/l+2):60*((i-n)/l+4),100*(0===a?0:l/a),100*a]}function hsvToRgbInt(e,t,r){let i,n,o;let a=(e%360+360)%360,l=constrainRange(t/100,0,1),s=constrainRange(r/100,0,1),p=s*l,d=p*(1-Math.abs(a/60%2-1)),u=s-p;return a>=0&&a<60?[i,n,o]=[p,d,0]:a>=60&&a<120?[i,n,o]=[d,p,0]:a>=120&&a<180?[i,n,o]=[0,p,d]:a>=180&&a<240?[i,n,o]=[0,d,p]:a>=240&&a<300?[i,n,o]=[d,0,p]:[i,n,o]=[p,0,d],[(i+u)*255,(n+u)*255,(o+u)*255]}function hslToHsvInt(e,t,r){let i=r+t*(100-Math.abs(2*r-100))/200;return[e,0!==i?t*(100-Math.abs(2*r-100))/i:0,r+t*(100-Math.abs(2*r-100))/200]}function hsvToHslInt(e,t,r){let i=100-Math.abs(r*(200-t)/100-100);return[e,0!==i?t*r/i:0,r*(200-t)/200]}function removeAlphaComponent(e){return[e[0],e[1],e[2]]}function appendAlphaComponent(e,t){return[e[0],e[1],e[2],t]}let B={hsl:{hsl:(e,t,r)=>[e,t,r],hsv:hslToHsvInt,rgb:hslToRgbInt},hsv:{hsl:hsvToHslInt,hsv:(e,t,r)=>[e,t,r],rgb:hsvToRgbInt},rgb:{hsl:rgbToHslInt,hsv:rgbToHsvInt,rgb:(e,t,r)=>[e,t,r]}};function getColorMaxComponents(e,t){return["float"===t?1:"rgb"===e?255:360,"float"===t?1:"rgb"===e?255:100,"float"===t?1:"rgb"===e?255:100]}function loopHueRange(e,t){return e===t?t:(e%t+t)%t}function constrainColorComponents(e,t,r){var i;let n=getColorMaxComponents(t,r);return["rgb"===t?constrainRange(e[0],0,n[0]):loopHueRange(e[0],n[0]),constrainRange(e[1],0,n[1]),constrainRange(e[2],0,n[2]),constrainRange(null!==(i=e[3])&&void 0!==i?i:1,0,1)]}function convertColorType(e,t,r,i){let n=getColorMaxComponents(t,r),o=getColorMaxComponents(t,i);return e.map((e,t)=>e/n[t]*o[t])}function convertColor(e,t,r){let i=convertColorType(e,t.mode,t.type,"int"),n=B[t.mode][r.mode](...i);return convertColorType(n,r.mode,"int",r.type)}function isRgbColorComponent(e,t){return!("object"!=typeof e||isEmpty(e))&&t in e&&"number"==typeof e[t]}let Color=class Color{static black(e="int"){return new Color([0,0,0],"rgb",e)}static fromObject(e,t="int"){let r="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new Color(r,"rgb",t)}static toRgbaObject(e,t="int"){return e.toRgbaObject(t)}static isRgbColorObject(e){return isRgbColorComponent(e,"r")&&isRgbColorComponent(e,"g")&&isRgbColorComponent(e,"b")}static isRgbaColorObject(e){return this.isRgbColorObject(e)&&isRgbColorComponent(e,"a")}static isColorObject(e){return this.isRgbColorObject(e)}static equals(e,t){if(e.mode!==t.mode)return!1;let r=e.comps_,i=t.comps_;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}constructor(e,t,r="int"){this.mode=t,this.type=r,this.comps_=constrainColorComponents(e,t,r)}getComponents(e,t="int"){return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_),{mode:this.mode,type:this.type},{mode:null!=e?e:this.mode,type:t}),this.comps_[3])}toRgbaObject(e="int"){let t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}}};let D=ClassName("colp");let ColorPickerView=class ColorPickerView{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(D()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("div");r.classList.add(D("hsv"));let i=e.createElement("div");i.classList.add(D("sv")),this.svPaletteView_=t.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);let n=e.createElement("div");n.classList.add(D("h")),this.hPaletteView_=t.hPaletteView,n.appendChild(this.hPaletteView_.element),r.appendChild(n),this.element.appendChild(r);let o=e.createElement("div");if(o.classList.add(D("rgb")),this.textView_=t.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};let r=e.createElement("div");r.classList.add(D("a"));let i=e.createElement("div");i.classList.add(D("ap")),i.appendChild(this.alphaViews_.palette.element),r.appendChild(i);let n=e.createElement("div");n.classList.add(D("at")),n.appendChild(this.alphaViews_.text.element),r.appendChild(n),this.element.appendChild(r)}}get allFocusableElements(){let e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(e=>e.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function parseColorType(e){return"int"===e?"int":"float"===e?"float":void 0}function parseColorInputParams(e){return parseParams(e,{alpha:i.optional.boolean,color:i.optional.object({alpha:i.optional.boolean,type:i.optional.custom(parseColorType)}),expanded:i.optional.boolean,picker:i.optional.custom(parsePickerLayout)})}function getBaseStepForColor(e){return e?.1:1}function extractColorType(e){var t;return null===(t=e.color)||void 0===t?void 0:t.type}function equalsStringColorFormat(e,t){return e.alpha===t.alpha&&e.mode===t.mode&&e.notation===t.notation&&e.type===t.type}function parseCssNumberOrPercentage(e,t){let r=e.match(/^(.+)%$/);return r?Math.min(.01*parseFloat(r[1])*t,t):Math.min(parseFloat(e),t)}let N={deg:e=>e,grad:e=>360*e/400,rad:e=>360*e/(2*Math.PI),turn:e=>360*e};function parseCssNumberOrAngle(e){let t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);let r=parseFloat(t[1]),i=t[2];return N[i](r)}function parseFunctionalRgbColorComponents(e){let t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let r=[parseCssNumberOrPercentage(t[1],255),parseCssNumberOrPercentage(t[2],255),parseCssNumberOrPercentage(t[3],255)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function createFunctionalRgbColorParser(e){return t=>{let r=parseFunctionalRgbColorComponents(t);return r?new Color(r,"rgb",e):null}}function parseFunctionalRgbaColorComponents(e){let t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let r=[parseCssNumberOrPercentage(t[1],255),parseCssNumberOrPercentage(t[2],255),parseCssNumberOrPercentage(t[3],255),parseCssNumberOrPercentage(t[4],1)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function createFunctionalRgbaColorParser(e){return t=>{let r=parseFunctionalRgbaColorComponents(t);return r?new Color(r,"rgb",e):null}}function parseHslColorComponents(e){let t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let r=[parseCssNumberOrAngle(t[1]),parseCssNumberOrPercentage(t[2],100),parseCssNumberOrPercentage(t[3],100)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function createHslColorParser(e){return t=>{let r=parseHslColorComponents(t);return r?new Color(r,"hsl",e):null}}function parseHslaColorComponents(e){let t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let r=[parseCssNumberOrAngle(t[1]),parseCssNumberOrPercentage(t[2],100),parseCssNumberOrPercentage(t[3],100),parseCssNumberOrPercentage(t[4],1)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function createHslaColorParser(e){return t=>{let r=parseHslaColorComponents(t);return r?new Color(r,"hsl",e):null}}function parseHexRgbColorComponents(e){let t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];let r=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:null}function parseHexRgbColor(e){let t=parseHexRgbColorComponents(e);return t?new Color(t,"rgb","int"):null}function parseHexRgbaColorComponents(e){let t=e.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),mapRange(parseInt(t[4]+t[4],16),0,255,0,1)];let r=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16),mapRange(parseInt(r[4],16),0,255,0,1)]:null}function parseHexRgbaColor(e){let t=parseHexRgbaColorComponents(e);return t?new Color(t,"rgb","int"):null}function parseObjectRgbColorComponents(e){let t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;let r=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function createObjectRgbColorParser(e){return t=>{let r=parseObjectRgbColorComponents(t);return r?new Color(r,"rgb",e):null}}function parseObjectRgbaColorComponents(e){let t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;let r=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function createObjectRgbaColorParser(e){return t=>{let r=parseObjectRgbaColorComponents(t);return r?new Color(r,"rgb",e):null}}let F=[{parser:parseHexRgbColorComponents,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:parseHexRgbaColorComponents,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:parseFunctionalRgbColorComponents,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:parseFunctionalRgbaColorComponents,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:parseHslColorComponents,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:parseHslaColorComponents,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:parseObjectRgbColorComponents,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:parseObjectRgbaColorComponents,result:{alpha:!0,mode:"rgb",notation:"object"}}];function detectStringColor(e){return F.reduce((t,{parser:r,result:i})=>t||(r(e)?i:null),null)}function detectStringColorFormat(e,t="int"){let r=detectStringColor(e);return r?"hex"===r.notation&&"float"!==t?Object.assign(Object.assign({},r),{type:"int"}):"func"===r.notation?Object.assign(Object.assign({},r),{type:t}):null:null}let O={int:[parseHexRgbColor,parseHexRgbaColor,createFunctionalRgbColorParser("int"),createFunctionalRgbaColorParser("int"),createHslColorParser("int"),createHslaColorParser("int"),createObjectRgbColorParser("int"),createObjectRgbaColorParser("int")],float:[createFunctionalRgbColorParser("float"),createFunctionalRgbaColorParser("float"),createHslColorParser("float"),createHslaColorParser("float"),createObjectRgbColorParser("float"),createObjectRgbaColorParser("float")]};function createColorStringBindingReader(e){let t=O[e];return r=>{if("string"!=typeof r)return Color.black(e);let i=t.reduce((e,t)=>e||t(r),null);return null!=i?i:Color.black(e)}}function createColorStringParser(e){let t=O[e];return e=>t.reduce((t,r)=>t||r(e),null)}function zerofill(e){let t=constrainRange(Math.floor(e),0,255).toString(16);return 1===t.length?`0${t}`:t}function colorToHexRgbString(e,t="#"){let r=removeAlphaComponent(e.getComponents("rgb")).map(zerofill).join("");return`${t}${r}`}function colorToHexRgbaString(e,t="#"){let r=e.getComponents("rgb"),i=[r[0],r[1],r[2],255*r[3]].map(zerofill).join("");return`${t}${i}`}function colorToFunctionalRgbString(e,t){let r=createNumberFormatter("float"===t?2:0),i=removeAlphaComponent(e.getComponents("rgb",t)).map(e=>r(e));return`rgb(${i.join(", ")})`}function createFunctionalRgbColorFormatter(e){return t=>colorToFunctionalRgbString(t,e)}function colorToFunctionalRgbaString(e,t){let r=createNumberFormatter(2),i=createNumberFormatter("float"===t?2:0),n=e.getComponents("rgb",t).map((e,t)=>(3===t?r:i)(e));return`rgba(${n.join(", ")})`}function createFunctionalRgbaColorFormatter(e){return t=>colorToFunctionalRgbaString(t,e)}function colorToFunctionalHslString(e){let t=[createNumberFormatter(0),formatPercentage,formatPercentage],r=removeAlphaComponent(e.getComponents("hsl")).map((e,r)=>t[r](e));return`hsl(${r.join(", ")})`}function colorToFunctionalHslaString(e){let t=[createNumberFormatter(0),formatPercentage,formatPercentage,createNumberFormatter(2)],r=e.getComponents("hsl").map((e,r)=>t[r](e));return`hsla(${r.join(", ")})`}function colorToObjectRgbString(e,t){let r=createNumberFormatter("float"===t?2:0),i=["r","g","b"],n=removeAlphaComponent(e.getComponents("rgb",t)).map((e,t)=>`${i[t]}: ${r(e)}`);return`{${n.join(", ")}}`}function createObjectRgbColorFormatter(e){return t=>colorToObjectRgbString(t,e)}function colorToObjectRgbaString(e,t){let r=createNumberFormatter(2),i=createNumberFormatter("float"===t?2:0),n=["r","g","b","a"],o=e.getComponents("rgb",t).map((e,t)=>`${n[t]}: ${(3===t?r:i)(e)}`);return`{${o.join(", ")}}`}function createObjectRgbaColorFormatter(e){return t=>colorToObjectRgbaString(t,e)}let I=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:colorToHexRgbString},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:colorToHexRgbaString},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:colorToFunctionalHslString},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:colorToFunctionalHslaString},...["int","float"].reduce((e,t)=>[...e,{format:{alpha:!1,mode:"rgb",notation:"func",type:t},stringifier:createFunctionalRgbColorFormatter(t)},{format:{alpha:!0,mode:"rgb",notation:"func",type:t},stringifier:createFunctionalRgbaColorFormatter(t)},{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:createObjectRgbColorFormatter(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:createObjectRgbaColorFormatter(t)}],[])];function findColorStringifier(e){return I.reduce((t,r)=>t||(equalsStringColorFormat(r.format,e)?r.stringifier:null),null)}let j=ClassName("apl");let APaletteView=class APaletteView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(j()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);let r=e.createElement("div");r.classList.add(j("b")),this.element.appendChild(r);let i=e.createElement("div");i.classList.add(j("c")),r.appendChild(i),this.colorElem_=i;let n=e.createElement("div");n.classList.add(j("m")),this.element.appendChild(n),this.markerElem_=n;let o=e.createElement("div");o.classList.add(j("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){let e=this.value.rawValue,t=e.getComponents("rgb"),r=new Color([t[0],t[1],t[2],0],"rgb"),i=new Color([t[0],t[1],t[2],255],"rgb"),n=["to right",colorToFunctionalRgbaString(r),colorToFunctionalRgbaString(i)];this.colorElem_.style.background=`linear-gradient(${n.join(",")})`,this.previewElem_.style.backgroundColor=colorToFunctionalRgbaString(e);let o=mapRange(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}};let APaletteController=class APaletteController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new APaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;let r=e.point.x/e.bounds.width,i=this.value.rawValue,[n,o,a]=i.getComponents("hsv");this.value.setRawValue(new Color([n,o,a,r],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){let t=getStepForKey(getBaseStepForColor(!0),getHorizontalStepKeys(e));if(0===t)return;let r=this.value.rawValue,[i,n,o,a]=r.getComponents("hsv");this.value.setRawValue(new Color([i,n,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){let t=getStepForKey(getBaseStepForColor(!0),getHorizontalStepKeys(e));0!==t&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};let K=ClassName("coltxt");function createModeSelectElement(e){let t=e.createElement("select");return t.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce((t,r)=>{let i=e.createElement("option");return i.textContent=r.text,i.value=r.value,t.appendChild(i),t},e.createDocumentFragment())),t}let ColorTextView=class ColorTextView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(K()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("div");r.classList.add(K("m")),this.modeElem_=createModeSelectElement(e),this.modeElem_.classList.add(K("ms")),r.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);let i=e.createElement("div");i.classList.add(K("mm")),i.appendChild(createSvgIconElement(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);let n=e.createElement("div");n.classList.add(K("w")),this.element.appendChild(n),this.textsElem_=n,this.textViews_=t.textViews,this.applyTextViews_(),bindValue(t.colorMode,e=>{this.modeElem_.value=e})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(e){this.textViews_=e,this.applyTextViews_()}applyTextViews_(){removeChildElements(this.textsElem_);let e=this.element.ownerDocument;this.textViews_.forEach(t=>{let r=e.createElement("div");r.classList.add(K("c")),r.appendChild(t.element),this.textsElem_.appendChild(r)})}};function createFormatter$2(e){return createNumberFormatter("float"===e?2:0)}function createConstraint$5(e,t,r){let i=getColorMaxComponents(e,t)[r];return new DefiniteRangeConstraint({min:0,max:i})}function createComponentController(e,t,r){return new NumberTextController(e,{arrayPosition:0===r?"fst":2===r?"lst":"mid",baseStep:getBaseStepForColor(!1),parser:t.parser,props:ValueMap.fromObject({draggingScale:"float"===t.colorType?.01:1,formatter:createFormatter$2(t.colorType)}),value:createValue(0,{constraint:createConstraint$5(t.colorMode,t.colorType,r)}),viewProps:t.viewProps})}let ColorTextController=class ColorTextController{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=createValue(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new ColorTextView(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){let t={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},r=[createComponentController(e,t,0),createComponentController(e,t,1),createComponentController(e,t,2)];return r.forEach((e,t)=>{connectValues({primary:this.value,secondary:e.value,forward:e=>e.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[t],backward:(e,r)=>{let i=this.colorMode.rawValue,n=e.rawValue.getComponents(i,this.colorType_);return n[t]=r.rawValue,new Color(appendAlphaComponent(removeAlphaComponent(n),n[3]),i,this.colorType_)}})}),r}onModeSelectChange_(e){let t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}};let H=ClassName("hpl");let HPaletteView=class HPaletteView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(H()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);let r=e.createElement("div");r.classList.add(H("c")),this.element.appendChild(r);let i=e.createElement("div");i.classList.add(H("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){let e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=colorToFunctionalRgbString(new Color([t,100,100],"hsv"));let r=mapRange(t,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}};let HPaletteController=class HPaletteController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new HPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;let r=mapRange(constrainRange(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,n,o,a]=i.getComponents("hsv");this.value.setRawValue(new Color([r,n,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){let t=getStepForKey(getBaseStepForColor(!1),getHorizontalStepKeys(e));if(0===t)return;let r=this.value.rawValue,[i,n,o,a]=r.getComponents("hsv");this.value.setRawValue(new Color([i+t,n,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){let t=getStepForKey(getBaseStepForColor(!1),getHorizontalStepKeys(e));0!==t&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};let U=ClassName("svp");let SvPaletteView=class SvPaletteView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(U()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);let r=e.createElement("canvas");r.height=64,r.width=64,r.classList.add(U("c")),this.element.appendChild(r),this.canvasElement=r;let i=e.createElement("div");i.classList.add(U("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){let e=getCanvasContext(this.canvasElement);if(!e)return;let t=this.value.rawValue,r=t.getComponents("hsv"),i=this.canvasElement.width,n=this.canvasElement.height,o=e.getImageData(0,0,i,n),a=o.data;for(let e=0;e<n;e++)for(let t=0;t<i;t++){let o=mapRange(t,0,i,0,100),l=mapRange(e,0,n,100,0),s=hsvToRgbInt(r[0],o,l),p=(e*i+t)*4;a[p]=s[0],a[p+1]=s[1],a[p+2]=s[2],a[p+3]=255}e.putImageData(o,0,0);let l=mapRange(r[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;let s=mapRange(r[2],0,100,100,0);this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}};let SvPaletteController=class SvPaletteController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new SvPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;let r=mapRange(e.point.x,0,e.bounds.width,0,100),i=mapRange(e.point.y,0,e.bounds.height,100,0),[n,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Color([n,r,i,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){isArrowKey(e.key)&&e.preventDefault();let[t,r,i,n]=this.value.rawValue.getComponents("hsv"),o=getBaseStepForColor(!1),a=getStepForKey(o,getHorizontalStepKeys(e)),l=getStepForKey(o,getVerticalStepKeys(e));(0!==a||0!==l)&&this.value.setRawValue(new Color([t,r+a,i+l,n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){let t=getBaseStepForColor(!1),r=getStepForKey(t,getHorizontalStepKeys(e)),i=getStepForKey(t,getVerticalStepKeys(e));(0!==r||0!==i)&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};let ColorPickerController=class ColorPickerController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new HPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new SvPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new APaletteController(e,{value:this.value,viewProps:this.viewProps}),text:new NumberTextController(e,{parser:parseNumber,baseStep:.1,props:ValueMap.fromObject({draggingScale:.01,formatter:createNumberFormatter(2)}),value:createValue(0,{constraint:new DefiniteRangeConstraint({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&connectValues({primary:this.value,secondary:this.alphaIcs_.text.value,forward:e=>e.rawValue.getComponents()[3],backward:(e,t)=>{let r=e.rawValue.getComponents();return r[3]=t.rawValue,new Color(r,e.rawValue.mode)}}),this.textC_=new ColorTextController(e,{colorType:t.colorType,parser:parseNumber,value:this.value,viewProps:this.viewProps}),this.view=new ColorPickerView(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}};let $=ClassName("colsw");let ColorSwatchView=class ColorSwatchView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add($()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("div");r.classList.add($("sw")),this.element.appendChild(r),this.swatchElem_=r;let i=e.createElement("button");i.classList.add($("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){let e=this.value.rawValue;this.swatchElem_.style.backgroundColor=colorToHexRgbaString(e)}onValueChange_(){this.update_()}};let ColorSwatchController=class ColorSwatchController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new ColorSwatchView(e,{value:this.value,viewProps:this.viewProps})}};let ColorController=class ColorController{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Foldable.create(t.expanded),this.swatchC_=new ColorSwatchController(e,{value:this.value,viewProps:this.viewProps});let r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new TextController(e,{parser:t.parser,props:ValueMap.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new ColorView(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===t.pickerLayout?new PopupController(e,{viewProps:this.viewProps}):null;let i=new ColorPickerController(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),connectValues({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e.rawValue,backward:(e,t)=>t.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bindFoldable(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;let t=this.view.element,r=e.relatedTarget;r&&t.contains(r)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;let t=this.popC_.view.element,r=findNextTarget(e);!(r&&t.contains(r))&&(!r||r!==this.swatchC_.view.buttonElement||supportsTouch(t.ownerDocument))&&(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.swatchC_.view.buttonElement.focus()}};function colorFromObject(e,t){return Color.isColorObject(e)?Color.fromObject(e,t):Color.black(t)}function colorToRgbNumber(e){return removeAlphaComponent(e.getComponents("rgb")).reduce((e,t)=>e<<8|255&Math.floor(t),0)}function colorToRgbaNumber(e){return e.getComponents("rgb").reduce((e,t,r)=>e<<8|255&Math.floor(3===r?255*t:t),0)>>>0}function numberToRgbColor(e){return new Color([e>>16&255,e>>8&255,255&e],"rgb")}function numberToRgbaColor(e){return new Color([e>>24&255,e>>16&255,e>>8&255,mapRange(255&e,0,255,0,1)],"rgb")}function colorFromRgbNumber(e){return"number"!=typeof e?Color.black():numberToRgbColor(e)}function colorFromRgbaNumber(e){return"number"!=typeof e?Color.black():numberToRgbaColor(e)}function createColorStringWriter(e){let t=findColorStringifier(e);return t?(e,r)=>{writePrimitive(e,t(r))}:null}function createColorNumberWriter(e){let t=e?colorToRgbaNumber:colorToRgbNumber;return(e,r)=>{writePrimitive(e,t(r))}}function writeRgbaColorObject(e,t,r){let i=t.toRgbaObject(r);e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b),e.writeProperty("a",i.a)}function writeRgbColorObject(e,t,r){let i=t.toRgbaObject(r);e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b)}function createColorObjectWriter(e,t){return(r,i)=>{e?writeRgbaColorObject(r,i,t):writeRgbColorObject(r,i,t)}}function shouldSupportAlpha$1(e){var t;return null!=e&&!!e.alpha||null!==(t=null==e?void 0:e.color)&&void 0!==t&&!!t.alpha}function createFormatter$1(e){return e?e=>colorToHexRgbaString(e,"0x"):e=>colorToHexRgbString(e,"0x")}function isForColor(e){return"color"in e||"view"in e&&"color"===e.view}let z={id:"input-color-number",type:"input",accept:(e,t)=>{if("number"!=typeof e||!isForColor(t))return null;let r=parseColorInputParams(t);return r?{initialValue:e,params:r}:null},binding:{reader:e=>shouldSupportAlpha$1(e.params)?colorFromRgbaNumber:colorFromRgbNumber,equals:Color.equals,writer:e=>createColorNumberWriter(shouldSupportAlpha$1(e.params))},controller:e=>{let t=shouldSupportAlpha$1(e.params),r="expanded"in e.params?e.params.expanded:void 0,i="picker"in e.params?e.params.picker:void 0;return new ColorController(e.document,{colorType:"int",expanded:null!=r&&r,formatter:createFormatter$1(t),parser:createColorStringParser("int"),pickerLayout:null!=i?i:"popup",supportsAlpha:t,value:e.value,viewProps:e.viewProps})}};function shouldSupportAlpha(e){return Color.isRgbaColorObject(e)}function createColorObjectReader(e){return t=>colorFromObject(t,e)}function createColorObjectFormatter(e,t){return r=>e?colorToObjectRgbaString(r,t):colorToObjectRgbString(r,t)}let q={id:"input-color-object",type:"input",accept:(e,t)=>{if(!Color.isColorObject(e))return null;let r=parseColorInputParams(t);return r?{initialValue:e,params:r}:null},binding:{reader:e=>createColorObjectReader(extractColorType(e.params)),equals:Color.equals,writer:e=>createColorObjectWriter(shouldSupportAlpha(e.initialValue),extractColorType(e.params))},controller:e=>{var t;let r=Color.isRgbaColorObject(e.initialValue),i="expanded"in e.params?e.params.expanded:void 0,n="picker"in e.params?e.params.picker:void 0,o=null!==(t=extractColorType(e.params))&&void 0!==t?t:"int";return new ColorController(e.document,{colorType:o,expanded:null!=i&&i,formatter:createColorObjectFormatter(r,o),parser:createColorStringParser(o),pickerLayout:null!=n?n:"popup",supportsAlpha:r,value:e.value,viewProps:e.viewProps})}},G={id:"input-color-string",type:"input",accept:(e,t)=>{if("string"!=typeof e||"view"in t&&"text"===t.view)return null;let r=detectStringColorFormat(e,extractColorType(t));if(!r)return null;let i=findColorStringifier(r);if(!i)return null;let n=parseColorInputParams(t);return n?{initialValue:e,params:n}:null},binding:{reader:e=>{var t;return createColorStringBindingReader(null!==(t=extractColorType(e.params))&&void 0!==t?t:"int")},equals:Color.equals,writer:e=>{let t=detectStringColorFormat(e.initialValue,extractColorType(e.params));if(!t)throw TpError.shouldNeverHappen();let r=createColorStringWriter(t);if(!r)throw TpError.notBindable();return r}},controller:e=>{let t=detectStringColorFormat(e.initialValue,extractColorType(e.params));if(!t)throw TpError.shouldNeverHappen();let r=findColorStringifier(t);if(!r)throw TpError.shouldNeverHappen();let i="expanded"in e.params?e.params.expanded:void 0,n="picker"in e.params?e.params.picker:void 0;return new ColorController(e.document,{colorType:t.type,expanded:null!=i&&i,formatter:r,parser:createColorStringParser(t.type),pickerLayout:null!=n?n:"popup",supportsAlpha:t.alpha,value:e.value,viewProps:e.viewProps})}};let PointNdConstraint=class PointNdConstraint{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){let t=this.asm_.toComponents(e).map((e,t)=>{var r,i;return null!==(i=null===(r=this.components[t])||void 0===r?void 0:r.constrain(e))&&void 0!==i?i:e});return this.asm_.fromComponents(t)}};let Y=ClassName("pndtxt");let PointNdTextView=class PointNdTextView{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Y()),this.textViews.forEach(t=>{let r=e.createElement("div");r.classList.add(Y("a")),r.appendChild(t.element),this.element.appendChild(r)})}};function createAxisController(e,t,r){return new NumberTextController(e,{arrayPosition:0===r?"fst":r===t.axes.length-1?"lst":"mid",baseStep:t.axes[r].baseStep,parser:t.parser,props:t.axes[r].textProps,value:createValue(0,{constraint:t.axes[r].constraint}),viewProps:t.viewProps})}let PointNdTextController=class PointNdTextController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((r,i)=>createAxisController(e,t,i)),this.acs_.forEach((e,r)=>{connectValues({primary:this.value,secondary:e.value,forward:e=>t.assembly.toComponents(e.rawValue)[r],backward:(e,i)=>{let n=t.assembly.toComponents(e.rawValue);return n[r]=i.rawValue,t.assembly.fromComponents(n)}})}),this.view=new PointNdTextView(e,{textViews:this.acs_.map(e=>e.view)})}};function createStepConstraint(e,t){return"step"in e&&!isEmpty(e.step)?new StepConstraint(e.step,t):null}function createRangeConstraint(e){return isEmpty(e.max)||isEmpty(e.min)?isEmpty(e.max)&&isEmpty(e.min)?null:new RangeConstraint({max:e.max,min:e.min}):new DefiniteRangeConstraint({max:e.max,min:e.min})}function findNumberRange(e){let t=findConstraint(e,DefiniteRangeConstraint);if(t)return[t.values.get("min"),t.values.get("max")];let r=findConstraint(e,RangeConstraint);return r?[r.minValue,r.maxValue]:[void 0,void 0]}function createConstraint$4(e,t){let r=[],i=createStepConstraint(e,t);i&&r.push(i);let n=createRangeConstraint(e);n&&r.push(n);let o=createListConstraint(e.options);return o&&r.push(o),new CompositeConstraint(r)}let W={id:"input-number",type:"input",accept:(e,t)=>{if("number"!=typeof e)return null;let r=parseParams(t,{format:i.optional.function,max:i.optional.number,min:i.optional.number,options:i.optional.custom(parseListOptions),step:i.optional.number});return r?{initialValue:e,params:r}:null},binding:{reader:e=>numberFromUnknown,constraint:e=>createConstraint$4(e.params,e.initialValue),writer:e=>writePrimitive},controller:e=>{var t;let r=e.value,i=e.constraint,n=i&&findConstraint(i,ListConstraint);if(n)return new ListController(e.document,{props:new ValueMap({options:n.values.value("options")}),value:r,viewProps:e.viewProps});let o=null!==(t="format"in e.params?e.params.format:void 0)&&void 0!==t?t:createNumberFormatter(getSuitableDecimalDigits(i,r.rawValue)),a=i&&findConstraint(i,DefiniteRangeConstraint);return a?new SliderTextController(e.document,{baseStep:getBaseStep(i),parser:parseNumber,sliderProps:new ValueMap({maxValue:a.values.value("max"),minValue:a.values.value("min")}),textProps:ValueMap.fromObject({draggingScale:getSuitableDraggingScale(i,r.rawValue),formatter:o}),value:r,viewProps:e.viewProps}):new NumberTextController(e.document,{baseStep:getBaseStep(i),parser:parseNumber,props:ValueMap.fromObject({draggingScale:getSuitableDraggingScale(i,r.rawValue),formatter:o}),value:r,viewProps:e.viewProps})}};let Point2d=class Point2d{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(isEmpty(e))return!1;let t=e.x,r=e.y;return"number"==typeof t&&"number"==typeof r}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}};let X={toComponents:e=>e.getComponents(),fromComponents:e=>new Point2d(...e)},J=ClassName("p2d");let Point2dView=class Point2dView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(J()),t.viewProps.bindClassModifiers(this.element),bindValue(t.expanded,valueToClassName(this.element,J(void 0,"expanded")));let r=e.createElement("div");r.classList.add(J("h")),this.element.appendChild(r);let i=e.createElement("button");i.classList.add(J("b")),i.appendChild(createSvgIconElement(e,"p2dpad")),t.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;let n=e.createElement("div");if(n.classList.add(J("t")),r.appendChild(n),this.textElement=n,"inline"===t.pickerLayout){let t=e.createElement("div");t.classList.add(J("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}};let Q=ClassName("p2dp");let Point2dPickerView=class Point2dPickerView{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(Q()),"popup"===t.layout&&this.element.classList.add(Q(void 0,"p")),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("div");r.classList.add(Q("p")),t.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;let i=e.createElementNS(l,"svg");i.classList.add(Q("g")),this.padElement.appendChild(i),this.svgElem_=i;let n=e.createElementNS(l,"line");n.classList.add(Q("ax")),n.setAttributeNS(null,"x1","0"),n.setAttributeNS(null,"y1","50%"),n.setAttributeNS(null,"x2","100%"),n.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(n);let o=e.createElementNS(l,"line");o.classList.add(Q("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);let a=e.createElementNS(l,"line");a.classList.add(Q("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;let s=e.createElement("div");s.classList.add(Q("m")),this.padElement.appendChild(s),this.markerElem_=s,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){let[e,t]=this.value.rawValue.getComponents(),r=this.maxValue_,i=mapRange(e,-r,+r,0,100),n=mapRange(t,-r,+r,0,100),o=this.invertsY_?100-n:n;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}};function computeOffset(e,t,r){return[getStepForKey(t[0],getHorizontalStepKeys(e)),getStepForKey(t[1],getVerticalStepKeys(e))*(r?1:-1)]}let Point2dPickerController=class Point2dPickerController{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new Point2dPickerView(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;let r=this.maxValue_,i=mapRange(e.point.x,0,e.bounds.width,-r,+r),n=mapRange(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Point2d(i,n),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){isArrowKey(e.key)&&e.preventDefault();let[t,r]=computeOffset(e,this.baseSteps_,this.invertsY_);(0!==t||0!==r)&&this.value.setRawValue(new Point2d(this.value.rawValue.x+t,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){let[t,r]=computeOffset(e,this.baseSteps_,this.invertsY_);(0!==t||0!==r)&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};let Point2dController=class Point2dController{constructor(e,t){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Foldable.create(t.expanded),this.popC_="popup"===t.pickerLayout?new PopupController(e,{viewProps:this.viewProps}):null;let n=new Point2dPickerController(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});n.view.allFocusableElements.forEach(e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=n,this.textC_=new PointNdTextController(e,{assembly:X,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new Point2dView(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),connectValues({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e.rawValue,backward:(e,t)=>t.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bindFoldable(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(e){if(!this.popC_)return;let t=this.view.element,r=e.relatedTarget;r&&t.contains(r)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;let t=this.popC_.view.element,r=findNextTarget(e);!(r&&t.contains(r))&&(!r||r!==this.view.buttonElement||supportsTouch(t.ownerDocument))&&(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.view.buttonElement.focus()}};let Point3d=class Point3d{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(isEmpty(e))return!1;let t=e.x,r=e.y,i=e.z;return"number"==typeof t&&"number"==typeof r&&"number"==typeof i}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};let Z={toComponents:e=>e.getComponents(),fromComponents:e=>new Point3d(...e)};function point3dFromUnknown(e){return Point3d.isObject(e)?new Point3d(e.x,e.y,e.z):new Point3d}function writePoint3d(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}function createConstraint$3(e,t){return new PointNdConstraint({assembly:Z,components:[createDimensionConstraint("x"in e?e.x:void 0,t.x),createDimensionConstraint("y"in e?e.y:void 0,t.y),createDimensionConstraint("z"in e?e.z:void 0,t.z)]})}function createAxis$2(e,t){return{baseStep:getBaseStep(t),constraint:t,textProps:ValueMap.fromObject({draggingScale:getSuitableDraggingScale(t,e),formatter:createNumberFormatter(getSuitableDecimalDigits(t,e))})}}let ee={id:"input-point3d",type:"input",accept:(e,t)=>{if(!Point3d.isObject(e))return null;let r=parseParams(t,{x:i.optional.custom(parsePointDimensionParams),y:i.optional.custom(parsePointDimensionParams),z:i.optional.custom(parsePointDimensionParams)});return r?{initialValue:e,params:r}:null},binding:{reader:e=>point3dFromUnknown,constraint:e=>createConstraint$3(e.params,e.initialValue),equals:Point3d.equals,writer:e=>writePoint3d},controller:e=>{let t=e.value,r=e.constraint;if(!(r instanceof PointNdConstraint))throw TpError.shouldNeverHappen();return new PointNdTextController(e.document,{assembly:Z,axes:[createAxis$2(t.rawValue.x,r.components[0]),createAxis$2(t.rawValue.y,r.components[1]),createAxis$2(t.rawValue.z,r.components[2])],parser:parseNumber,value:t,viewProps:e.viewProps})}};let Point4d=class Point4d{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(isEmpty(e))return!1;let t=e.x,r=e.y,i=e.z,n=e.w;return"number"==typeof t&&"number"==typeof r&&"number"==typeof i&&"number"==typeof n}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};let et={toComponents:e=>e.getComponents(),fromComponents:e=>new Point4d(...e)};function point4dFromUnknown(e){return Point4d.isObject(e)?new Point4d(e.x,e.y,e.z,e.w):new Point4d}function writePoint4d(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}function createConstraint$2(e,t){return new PointNdConstraint({assembly:et,components:[createDimensionConstraint("x"in e?e.x:void 0,t.x),createDimensionConstraint("y"in e?e.y:void 0,t.y),createDimensionConstraint("z"in e?e.z:void 0,t.z),createDimensionConstraint("w"in e?e.w:void 0,t.w)]})}function createAxis$1(e,t){return{baseStep:getBaseStep(t),constraint:t,textProps:ValueMap.fromObject({draggingScale:getSuitableDraggingScale(t,e),formatter:createNumberFormatter(getSuitableDecimalDigits(t,e))})}}let er={id:"input-point4d",type:"input",accept:(e,t)=>{if(!Point4d.isObject(e))return null;let r=parseParams(t,{x:i.optional.custom(parsePointDimensionParams),y:i.optional.custom(parsePointDimensionParams),z:i.optional.custom(parsePointDimensionParams),w:i.optional.custom(parsePointDimensionParams)});return r?{initialValue:e,params:r}:null},binding:{reader:e=>point4dFromUnknown,constraint:e=>createConstraint$2(e.params,e.initialValue),equals:Point4d.equals,writer:e=>writePoint4d},controller:e=>{let t=e.value,r=e.constraint;if(!(r instanceof PointNdConstraint))throw TpError.shouldNeverHappen();return new PointNdTextController(e.document,{assembly:et,axes:t.rawValue.getComponents().map((e,t)=>createAxis$1(e,r.components[t])),parser:parseNumber,value:t,viewProps:e.viewProps})}};function createConstraint$1(e){let t=[],r=createListConstraint(e.options);return r&&t.push(r),new CompositeConstraint(t)}let ei={id:"input-string",type:"input",accept:(e,t)=>{if("string"!=typeof e)return null;let r=parseParams(t,{options:i.optional.custom(parseListOptions)});return r?{initialValue:e,params:r}:null},binding:{reader:e=>stringFromUnknown,constraint:e=>createConstraint$1(e.params),writer:e=>writePrimitive},controller:e=>{let t=e.document,r=e.value,i=e.constraint,n=i&&findConstraint(i,ListConstraint);return n?new ListController(t,{props:new ValueMap({options:n.values.value("options")}),value:r,viewProps:e.viewProps}):new TextController(t,{parser:e=>e,props:ValueMap.fromObject({formatter:formatString}),value:r,viewProps:e.viewProps})}},en={monitor:{defaultInterval:200,defaultLineCount:3}},eo=ClassName("mll");let MultiLogView=class MultiLogView{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(eo()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("textarea");r.classList.add(eo("i")),r.style.height=`calc(var(--bld-us) * ${t.lineCount})`,r.readOnly=!0,t.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){let e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(e=>{void 0!==e&&r.push(this.formatter_(e))}),e.textContent=r.join("\n"),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}};let MultiLogController=class MultiLogController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new MultiLogView(e,{formatter:t.formatter,lineCount:t.lineCount,value:this.value,viewProps:this.viewProps})}};let ea=ClassName("sgl");let SingleLogView=class SingleLogView{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(ea()),t.viewProps.bindClassModifiers(this.element);let r=e.createElement("input");r.classList.add(ea("i")),r.readOnly=!0,r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){let e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=void 0!==t?this.formatter_(t):""}onValueUpdate_(){this.update_()}};let SingleLogController=class SingleLogController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new SingleLogView(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}};let el={id:"monitor-bool",type:"monitor",accept:(e,t)=>{if("boolean"!=typeof e)return null;let r=parseParams(t,{lineCount:i.optional.number});return r?{initialValue:e,params:r}:null},binding:{reader:e=>boolFromUnknown},controller:e=>{var t;return 1===e.value.rawValue.length?new SingleLogController(e.document,{formatter:BooleanFormatter,value:e.value,viewProps:e.viewProps}):new MultiLogController(e.document,{formatter:BooleanFormatter,lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:en.monitor.defaultLineCount,value:e.value,viewProps:e.viewProps})}},es=ClassName("grl");let GraphLogView=class GraphLogView{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(es()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);let r=e.createElementNS(l,"svg");r.classList.add(es("g")),r.style.height=`calc(var(--bld-us) * ${t.lineCount})`,this.element.appendChild(r),this.svgElem_=r;let i=e.createElementNS(l,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;let n=e.createElement("div");n.classList.add(es("t"),ClassName("tt")()),this.element.appendChild(n),this.tooltipElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){let e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,r=this.props_.get("minValue"),i=this.props_.get("maxValue"),n=[];this.value.rawValue.forEach((o,a)=>{if(void 0===o)return;let l=mapRange(a,0,t,0,e.width),s=mapRange(o,r,i,e.height,0);n.push([l,s].join(","))}),this.lineElem_.setAttributeNS(null,"points",n.join(" "));let o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(void 0===a){o.classList.remove(es("t","a"));return}let l=mapRange(this.cursor_.rawValue,0,t,0,e.width),s=mapRange(a,r,i,e.height,0);o.style.left=`${l}px`,o.style.top=`${s}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(es("t","a"))||(o.classList.add(es("t","a"),es("t","in")),forceReflow(o),o.classList.remove(es("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}};let GraphLogController=class GraphLogController{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=createValue(-1),this.view=new GraphLogView(e,{cursor:this.cursor_,formatter:t.formatter,lineCount:t.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),supportsTouch(e)){let e=new PointerHandler(this.view.element);e.emitter.on("down",this.onGraphPointerDown_),e.emitter.on("move",this.onGraphPointerMove_),e.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){let t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(mapRange(e.offsetX,0,t.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(mapRange(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function createFormatter(e){return"format"in e&&!isEmpty(e.format)?e.format:createNumberFormatter(2)}function createTextMonitor(e){var t;return 1===e.value.rawValue.length?new SingleLogController(e.document,{formatter:createFormatter(e.params),value:e.value,viewProps:e.viewProps}):new MultiLogController(e.document,{formatter:createFormatter(e.params),lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:en.monitor.defaultLineCount,value:e.value,viewProps:e.viewProps})}function createGraphMonitor(e){var t,r,i;return new GraphLogController(e.document,{formatter:createFormatter(e.params),lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:en.monitor.defaultLineCount,props:ValueMap.fromObject({maxValue:null!==(r="max"in e.params?e.params.max:null)&&void 0!==r?r:100,minValue:null!==(i="min"in e.params?e.params.min:null)&&void 0!==i?i:0}),value:e.value,viewProps:e.viewProps})}function shouldShowGraph(e){return"view"in e&&"graph"===e.view}let ep={id:"monitor-number",type:"monitor",accept:(e,t)=>{if("number"!=typeof e)return null;let r=parseParams(t,{format:i.optional.function,lineCount:i.optional.number,max:i.optional.number,min:i.optional.number,view:i.optional.string});return r?{initialValue:e,params:r}:null},binding:{defaultBufferSize:e=>shouldShowGraph(e)?64:1,reader:e=>numberFromUnknown},controller:e=>shouldShowGraph(e.params)?createGraphMonitor(e):createTextMonitor(e)},ed={id:"monitor-string",type:"monitor",accept:(e,t)=>{if("string"!=typeof e)return null;let r=parseParams(t,{lineCount:i.optional.number,multiline:i.optional.boolean});return r?{initialValue:e,params:r}:null},binding:{reader:e=>stringFromUnknown},controller:e=>{var t;let r=e.value,i=r.rawValue.length>1||"multiline"in e.params&&e.params.multiline;return i?new MultiLogController(e.document,{formatter:formatString,lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:en.monitor.defaultLineCount,value:r,viewProps:e.viewProps}):new SingleLogController(e.document,{formatter:formatString,value:r,viewProps:e.viewProps})}};function createInputBindingController(e,t){var r;let n=e.accept(t.target.read(),t.params);if(isEmpty(n))return null;let o={target:t.target,initialValue:n.initialValue,params:n.params},a=e.binding.reader(o),l=e.binding.constraint?e.binding.constraint(o):void 0,s=createValue(a(n.initialValue),{constraint:l,equals:e.binding.equals}),p=new InputBinding({reader:a,target:t.target,value:s,writer:e.binding.writer(o)}),d=i.optional.boolean(t.params.disabled).value,u=i.optional.boolean(t.params.hidden).value,c=e.controller({constraint:l,document:t.document,initialValue:n.initialValue,params:n.params,value:p.value,viewProps:ViewProps.create({disabled:d,hidden:u})});return new InputBindingController(t.document,{binding:p,blade:createBlade(),props:ValueMap.fromObject({label:"label"in t.params?null!==(r=i.optional.string(t.params.label).value)&&void 0!==r?r:null:t.target.key}),valueController:c})}function createTicker(e,t){return 0===t?new ManualTicker:new IntervalTicker(e,null!=t?t:en.monitor.defaultInterval)}function createMonitorBindingController(e,t){var r,n,o;let a=e.accept(t.target.read(),t.params);if(isEmpty(a))return null;let l={target:t.target,initialValue:a.initialValue,params:a.params},s=e.binding.reader(l),p=null!==(n=null!==(r=i.optional.number(t.params.bufferSize).value)&&void 0!==r?r:e.binding.defaultBufferSize&&e.binding.defaultBufferSize(a.params))&&void 0!==n?n:1,d=i.optional.number(t.params.interval).value,u=new MonitorBinding({reader:s,target:t.target,ticker:createTicker(t.document,d),value:initializeBuffer(p)}),c=i.optional.boolean(t.params.disabled).value,h=i.optional.boolean(t.params.hidden).value,v=e.controller({document:t.document,params:a.params,value:u.value,viewProps:ViewProps.create({disabled:c,hidden:h})});return new MonitorBindingController(t.document,{binding:u,blade:createBlade(),props:ValueMap.fromObject({label:"label"in t.params?null!==(o=i.optional.string(t.params.label).value)&&void 0!==o?o:null:t.target.key}),valueController:v})}let PluginPool=class PluginPool{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e){"blade"===e.type?this.pluginsMap_.blades.unshift(e):"input"===e.type?this.pluginsMap_.inputs.unshift(e):"monitor"===e.type&&this.pluginsMap_.monitors.unshift(e)}createInput(e,t,r){let i=t.read();if(isEmpty(i))throw new TpError({context:{key:t.key},type:"nomatchingcontroller"});let n=this.pluginsMap_.inputs.reduce((i,n)=>null!=i?i:createInputBindingController(n,{document:e,target:t,params:r}),null);if(n)return n;throw new TpError({context:{key:t.key},type:"nomatchingcontroller"})}createMonitor(e,t,r){let i=this.pluginsMap_.monitors.reduce((i,n)=>null!=i?i:createMonitorBindingController(n,{document:e,params:r,target:t}),null);if(i)return i;throw new TpError({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){let r=this.pluginsMap_.blades.reduce((r,i)=>null!=r?r:createBladeController(i,{document:e,params:t}),null);if(!r)throw new TpError({type:"nomatchingview",context:{params:t}});return r}createBladeApi(e){if(e instanceof InputBindingController)return new InputBindingApi(e);if(e instanceof MonitorBindingController)return new MonitorBindingApi(e);if(e instanceof RackController)return new RackApi(e,this);let t=this.pluginsMap_.blades.reduce((t,r)=>null!=t?t:r.api({controller:e,pool:this}),null);if(!t)throw TpError.shouldNeverHappen();return t}};function createDefaultPluginPool(){let e=new PluginPool;return[eu,ee,er,ei,W,G,q,z,L,el,ed,ep,d,c,v,g].forEach(t=>{e.register(t)}),e}function point2dFromUnknown(e){return Point2d.isObject(e)?new Point2d(e.x,e.y):new Point2d}function writePoint2d(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y)}function createDimensionConstraint(e,t){if(!e)return;let r=[],i=createStepConstraint(e,t);i&&r.push(i);let n=createRangeConstraint(e);return n&&r.push(n),new CompositeConstraint(r)}function createConstraint(e,t){return new PointNdConstraint({assembly:X,components:[createDimensionConstraint("x"in e?e.x:void 0,t.x),createDimensionConstraint("y"in e?e.y:void 0,t.y)]})}function getSuitableMaxDimensionValue(e,t){let[r,i]=e?findNumberRange(e):[];if(!isEmpty(r)||!isEmpty(i))return Math.max(Math.abs(null!=r?r:0),Math.abs(null!=i?i:0));let n=getBaseStep(e);return Math.max(10*Math.abs(n),10*Math.abs(t))}function getSuitableMaxValue(e,t){let r=t instanceof PointNdConstraint?t.components[0]:void 0,i=t instanceof PointNdConstraint?t.components[1]:void 0,n=getSuitableMaxDimensionValue(r,e.x),o=getSuitableMaxDimensionValue(i,e.y);return Math.max(n,o)}function createAxis(e,t){return{baseStep:getBaseStep(t),constraint:t,textProps:ValueMap.fromObject({draggingScale:getSuitableDraggingScale(t,e),formatter:createNumberFormatter(getSuitableDecimalDigits(t,e))})}}function shouldInvertY(e){if(!("y"in e))return!1;let t=e.y;return!!t&&"inverted"in t&&!!t.inverted}let eu={id:"input-point2d",type:"input",accept:(e,t)=>{if(!Point2d.isObject(e))return null;let r=parseParams(t,{expanded:i.optional.boolean,picker:i.optional.custom(parsePickerLayout),x:i.optional.custom(parsePointDimensionParams),y:i.optional.object({inverted:i.optional.boolean,max:i.optional.number,min:i.optional.number,step:i.optional.number})});return r?{initialValue:e,params:r}:null},binding:{reader:e=>point2dFromUnknown,constraint:e=>createConstraint(e.params,e.initialValue),equals:Point2d.equals,writer:e=>writePoint2d},controller:e=>{let t=e.document,r=e.value,i=e.constraint;if(!(i instanceof PointNdConstraint))throw TpError.shouldNeverHappen();let n="expanded"in e.params?e.params.expanded:void 0,o="picker"in e.params?e.params.picker:void 0;return new Point2dController(t,{axes:[createAxis(r.rawValue.x,i.components[0]),createAxis(r.rawValue.y,i.components[1])],expanded:null!=n&&n,invertsY:shouldInvertY(e.params),maxValue:getSuitableMaxValue(r.rawValue,i),parser:parseNumber,pickerLayout:null!=o?o:"popup",value:r,viewProps:e.viewProps})}};let ListApi=class ListApi extends BladeApi{constructor(e){super(e),this.emitter_=new Emitter,this.controller_.valueController.value.emitter.on("change",e=>{this.emitter_.emit("change",{event:new TpChangeEvent(this,e.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get options(){return this.controller_.valueController.props.get("options")}set options(e){this.controller_.valueController.props.set("options",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}};let SliderApi=class SliderApi extends BladeApi{constructor(e){super(e),this.emitter_=new Emitter,this.controller_.valueController.value.emitter.on("change",e=>{this.emitter_.emit("change",{event:new TpChangeEvent(this,e.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(e){this.controller_.valueController.sliderController.props.set("maxValue",e)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(e){this.controller_.valueController.sliderController.props.set("minValue",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}};let TextApi=class TextApi extends BladeApi{constructor(e){super(e),this.emitter_=new Emitter,this.controller_.valueController.value.emitter.on("change",e=>{this.emitter_.emit("change",{event:new TpChangeEvent(this,e.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(e){this.controller_.valueController.props.set("formatter",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,t){let r=t.bind(this);return this.emitter_.on(e,e=>{r(e.event)}),this}};let ec={id:"list",type:"blade",accept(e){let t=parseParams(e,{options:i.required.custom(parseListOptions),value:i.required.raw,view:i.required.constant("list"),label:i.optional.string});return t?{params:t}:null},controller(e){let t=new ListConstraint(normalizeListOptions(e.params.options)),r=createValue(e.params.value,{constraint:t}),i=new ListController(e.document,{props:new ValueMap({options:t.values.value("options")}),value:r,viewProps:e.viewProps});return new LabeledValueController(e.document,{blade:e.blade,props:ValueMap.fromObject({label:e.params.label}),valueController:i})},api:e=>e.controller instanceof LabeledValueController&&e.controller.valueController instanceof ListController?new ListApi(e.controller):null};function exportPresetJson(e){return e.reduce((e,t)=>Object.assign(e,{[t.presetKey]:t.read()}),{})}function importPresetJson(e,t){e.forEach(e=>{let r=t[e.target.presetKey];void 0!==r&&e.writer(e.target,e.reader(r))})}let RootApi=class RootApi extends FolderApi{constructor(e,t){super(e,t)}get element(){return this.controller_.view.element}importPreset(e){let t=this.controller_.rackController.rack.find(InputBindingController).map(e=>e.binding);importPresetJson(t,e),this.refresh()}exportPreset(){let e=this.controller_.rackController.rack.find(InputBindingController).map(e=>e.binding.target);return exportPresetJson(e)}refresh(){this.controller_.rackController.rack.find(InputBindingController).forEach(e=>{e.binding.read()}),this.controller_.rackController.rack.find(MonitorBindingController).forEach(e=>{e.binding.read()})}};let RootController=class RootController extends FolderController{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}};let eh={id:"slider",type:"blade",accept(e){let t=parseParams(e,{max:i.required.number,min:i.required.number,view:i.required.constant("slider"),format:i.optional.function,label:i.optional.string,value:i.optional.number});return t?{params:t}:null},controller(e){var t,r;let i=null!==(t=e.params.value)&&void 0!==t?t:0,n=new DefiniteRangeConstraint({max:e.params.max,min:e.params.min}),o=new SliderTextController(e.document,{baseStep:1,parser:parseNumber,sliderProps:new ValueMap({maxValue:n.values.value("max"),minValue:n.values.value("min")}),textProps:ValueMap.fromObject({draggingScale:getSuitableDraggingScale(void 0,i),formatter:null!==(r=e.params.format)&&void 0!==r?r:numberToString}),value:createValue(i,{constraint:n}),viewProps:e.viewProps});return new LabeledValueController(e.document,{blade:e.blade,props:ValueMap.fromObject({label:e.params.label}),valueController:o})},api:e=>e.controller instanceof LabeledValueController&&e.controller.valueController instanceof SliderTextController?new SliderApi(e.controller):null},ev={id:"text",type:"blade",accept(e){let t=parseParams(e,{parse:i.required.function,value:i.required.raw,view:i.required.constant("text"),format:i.optional.function,label:i.optional.string});return t?{params:t}:null},controller(e){var t;let r=new TextController(e.document,{parser:e.params.parse,props:ValueMap.fromObject({formatter:null!==(t=e.params.format)&&void 0!==t?t:e=>String(e)}),value:createValue(e.params.value),viewProps:e.viewProps});return new LabeledValueController(e.document,{blade:e.blade,props:ValueMap.fromObject({label:e.params.label}),valueController:r})},api:e=>e.controller instanceof LabeledValueController&&e.controller.valueController instanceof TextController?new TextApi(e.controller):null};function createDefaultWrapperElement(e){let t=e.createElement("div");return t.classList.add(ClassName("dfw")()),e.body&&e.body.appendChild(t),t}function embedStyle(e,t,r){if(e.querySelector(`style[data-tp-style=${t}]`))return;let i=e.createElement("style");i.dataset.tpStyle=t,i.textContent=r,e.head.appendChild(i)}let Pane=class Pane extends RootApi{constructor(e){var t,r;let i=null!=e?e:{},n=null!==(t=i.document)&&void 0!==t?t:getWindowDocument(),o=createDefaultPluginPool(),a=new RootController(n,{expanded:i.expanded,blade:createBlade(),props:ValueMap.fromObject({title:i.title}),viewProps:ViewProps.create()});super(a,o),this.pool_=o,this.containerElem_=null!==(r=i.container)&&void 0!==r?r:createDefaultWrapperElement(n),this.containerElem_.appendChild(this.element),this.doc_=n,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw TpError.alreadyDisposed();return this.doc_}dispose(){let e=this.containerElem_;if(!e)throw TpError.alreadyDisposed();if(this.usesDefaultWrapper_){let t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){let t="plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[];t.forEach(e=>{this.pool_.register(e),this.embedPluginStyle_(e)})}embedPluginStyle_(e){e.css&&embedStyle(this.document,`plugin-${e.id}`,e.css)}setUpDefaultPlugins_(){embedStyle(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(e=>{this.embedPluginStyle_(e)}),this.registerPlugin({plugins:[eh,ec,g,ev]})}};let em=new Semver("3.1.10");e.BladeApi=BladeApi,e.ButtonApi=ButtonApi,e.FolderApi=FolderApi,e.InputBindingApi=InputBindingApi,e.ListApi=ListApi,e.MonitorBindingApi=MonitorBindingApi,e.Pane=Pane,e.SeparatorApi=SeparatorApi,e.SliderApi=SliderApi,e.TabApi=TabApi,e.TabPageApi=TabPageApi,e.TextApi=TextApi,e.TpChangeEvent=TpChangeEvent,e.VERSION=em,Object.defineProperty(e,"__esModule",{value:!0})}(t)}}]);