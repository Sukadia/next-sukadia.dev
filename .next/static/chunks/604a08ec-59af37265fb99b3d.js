"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[735],{78:function(t,e,r){r.d(e,{FM:function(){return Vector2},Lt:function(){return Vector4},P:function(){return Vector3},_f:function(){return Quaternion},jp:function(){return TmpVectors},y3:function(){return Matrix}});var i=r(5762),s=r(9806),o=r(4254),a=r(3048),n=r(4548),h=r(6030);let _ExtractAsInt=t=>parseInt(t.toString().replace(/\W/g,""));let Vector2=class Vector2{constructor(t=0,e=0){this.x=t,this.y=e}toString(){return`{X: ${this.x} Y: ${this.y}}`}getClassName(){return"Vector2"}getHashCode(){let t=_ExtractAsInt(this.x),e=_ExtractAsInt(this.y);return 397*t^e}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,this}fromArray(t,e=0){return Vector2.FromArrayToRef(t,e,this),this}asArray(){let t=[];return this.toArray(t,0),t}copyFrom(t){return this.x=t.x,this.y=t.y,this}copyFromFloats(t,e){return this.x=t,this.y=e,this}set(t,e){return this.copyFromFloats(t,e)}add(t){return new this.constructor(this.x+t.x,this.y+t.y)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}addVector3(t){return new this.constructor(this.x+t.x,this.y+t.y)}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e}multiplyByFloats(t,e){return new this.constructor(this.x*t,this.y*e)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e}divideInPlace(t){return this.divideToRef(t,this)}negate(){return new this.constructor(-this.x,-this.y)}negateInPlace(){return this.x*=-1,this.y*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y)}scaleInPlace(t){return this.x*=t,this.y*=t,this}scale(t){let e=new this.constructor(0,0);return this.scaleToRef(t,e),e}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e}equals(t){return t&&this.x===t.x&&this.y===t.y}equalsWithEpsilon(t,e=s.kn){return t&&i.R.WithinEpsilon(this.x,t.x,e)&&i.R.WithinEpsilon(this.y,t.y,e)}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}rotateToRef(t,e){let r=Math.cos(t),i=Math.sin(t),s=r*this.x-i*this.y,o=i*this.x+r*this.y;return e.x=s,e.y=o,e}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return Vector2.NormalizeToRef(this,this),this}clone(){return new this.constructor(this.x,this.y)}static Zero(){return new Vector2(0,0)}static One(){return new Vector2(1,1)}static Random(t=0,e=1){return new Vector2(i.R.RandomRange(t,e),i.R.RandomRange(t,e))}static get ZeroReadOnly(){return Vector2._ZeroReadOnly}static FromArray(t,e=0){return new Vector2(t[e],t[e+1])}static FromArrayToRef(t,e,r){return r.x=t[e],r.y=t[e+1],r}static CatmullRom(t,e,r,i,s){let o=s*s,a=s*o,n=.5*(2*e.x+(-t.x+r.x)*s+(2*t.x-5*e.x+4*r.x-i.x)*o+(-t.x+3*e.x-3*r.x+i.x)*a),h=.5*(2*e.y+(-t.y+r.y)*s+(2*t.y-5*e.y+4*r.y-i.y)*o+(-t.y+3*e.y-3*r.y+i.y)*a);return new t.constructor(n,h)}static Clamp(t,e,r){let i=t.x;i=(i=i>r.x?r.x:i)<e.x?e.x:i;let s=t.y;return s=(s=s>r.y?r.y:s)<e.y?e.y:s,new t.constructor(i,s)}static Hermite(t,e,r,i,s){let o=s*s,a=s*o,n=2*a-3*o+1,h=-2*a+3*o,c=a-2*o+s,_=a-o,l=t.x*n+r.x*h+e.x*c+i.x*_,u=t.y*n+r.y*h+e.y*c+i.y*_;return new t.constructor(l,u)}static Hermite1stDerivative(t,e,r,i,s){let o=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,r,i,s,o),o}static Hermite1stDerivativeToRef(t,e,r,i,s,o){let a=s*s;return o.x=(a-s)*6*t.x+(3*a-4*s+1)*e.x+(-a+s)*6*r.x+(3*a-2*s)*i.x,o.y=(a-s)*6*t.y+(3*a-4*s+1)*e.y+(-a+s)*6*r.y+(3*a-2*s)*i.y,o}static Lerp(t,e,r){let i=t.x+(e.x-t.x)*r,s=t.y+(e.y-t.y)*r;return new t.constructor(i,s)}static Dot(t,e){return t.x*e.x+t.y*e.y}static Normalize(t){let e=new t.constructor;return this.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){let r=t.length();return 0===r||(e.x=t.x/r,e.y=t.y/r),e}static Minimize(t,e){let r=t.x<e.x?t.x:e.x,i=t.y<e.y?t.y:e.y;return new t.constructor(r,i)}static Maximize(t,e){let r=t.x>e.x?t.x:e.x,i=t.y>e.y?t.y:e.y;return new t.constructor(r,i)}static Transform(t,e){let r=new t.constructor;return Vector2.TransformToRef(t,e,r),r}static TransformToRef(t,e,r){let i=e.m,s=t.x*i[0]+t.y*i[4]+i[12],o=t.x*i[1]+t.y*i[5]+i[13];return r.x=s,r.y=o,r}static PointInTriangle(t,e,r,i){let s=.5*(-r.y*i.x+e.y*(-r.x+i.x)+e.x*(r.y-i.y)+r.x*i.y),o=s<0?-1:1,a=(e.y*i.x-e.x*i.y+(i.y-e.y)*t.x+(e.x-i.x)*t.y)*o,n=(e.x*r.y-e.y*r.x+(e.y-r.y)*t.x+(r.x-e.x)*t.y)*o;return a>0&&n>0&&a+n<2*s*o}static Distance(t,e){return Math.sqrt(Vector2.DistanceSquared(t,e))}static DistanceSquared(t,e){let r=t.x-e.x,i=t.y-e.y;return r*r+i*i}static Center(t,e){let r=new t.constructor;return Vector2.CenterToRef(t,e,r)}static CenterToRef(t,e,r){return r.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)}static DistanceOfPointFromSegment(t,e,r){let i=Vector2.DistanceSquared(e,r);if(0===i)return Vector2.Distance(t,e);let s=r.subtract(e),o=Math.max(0,Math.min(1,Vector2.Dot(t.subtract(e),s)/i)),a=e.add(s.multiplyByFloats(o,o));return Vector2.Distance(t,a)}};Vector2._ZeroReadOnly=Vector2.Zero();let Vector3=class Vector3{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}constructor(t=0,e=0,r=0){this._isDirty=!0,this._x=t,this._y=e,this._z=r}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z}}`}getClassName(){return"Vector3"}getHashCode(){let t=_ExtractAsInt(this._x),e=_ExtractAsInt(this._y),r=_ExtractAsInt(this._z),i=t;return 397*(i=397*i^e)^r}asArray(){let t=[];return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this}fromArray(t,e=0){return Vector3.FromArrayToRef(t,e,this),this}toQuaternion(){return Quaternion.RotationYawPitchRoll(this._y,this._x,this._z)}addInPlace(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)}addInPlaceFromFloats(t,e,r){return this._x+=t,this._y+=e,this._z+=r,this._isDirty=!0,this}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z)}addToRef(t,e){return e.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._isDirty=!0,this}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z)}subtractToRef(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)}subtractFromFloats(t,e,r){return new this.constructor(this._x-t,this._y-e,this._z-r)}subtractFromFloatsToRef(t,e,r,i){return i.copyFromFloats(this._x-t,this._y-e,this._z-r)}negate(){return new this.constructor(-this._x,-this._y,-this._z)}negateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}negateToRef(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t)}scaleToRef(t,e){return e.copyFromFloats(this._x*t,this._y*t,this._z*t)}getNormalToRef(t){let e=this.length(),r=Math.acos(this.y/e),i=Math.atan2(this.z,this.x);r>Math.PI/2?r-=Math.PI/2:r+=Math.PI/2;let s=e*Math.sin(r)*Math.cos(i),o=e*Math.cos(r),a=e*Math.sin(r)*Math.sin(i);return t.set(s,o,a),t}applyRotationQuaternionToRef(t,e){let r=this._x,i=this._y,s=this._z,o=t._x,a=t._y,n=t._z,h=t._w,c=2*(a*s-n*i),_=2*(n*r-o*s),l=2*(o*i-a*r);return e._x=r+h*c+a*l-n*_,e._y=i+h*_+n*c-o*l,e._z=s+h*l+o*_-a*c,e._isDirty=!0,e}applyRotationQuaternionInPlace(t){return this.applyRotationQuaternionToRef(t,this)}applyRotationQuaternion(t){return this.applyRotationQuaternionToRef(t,new this.constructor)}scaleAndAddToRef(t,e){return e.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}projectOnPlane(t,e){let r=new this.constructor;return this.projectOnPlaneToRef(t,e,r),r}projectOnPlaneToRef(t,e,r){let i=t.normal,s=t.d,o=MathTmp.Vector3[0];this.subtractToRef(e,o),o.normalize();let a=Vector3.Dot(o,i);if(1e-10>Math.abs(a))r.setAll(1/0);else{let t=-(Vector3.Dot(e,i)+s)/a,n=o.scaleInPlace(t);e.addToRef(n,r)}return r}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}equalsWithEpsilon(t,e=s.kn){return t&&i.R.WithinEpsilon(this._x,t._x,e)&&i.R.WithinEpsilon(this._y,t._y,e)&&i.R.WithinEpsilon(this._z,t._z,e)}equalsToFloats(t,e,r){return this._x===t&&this._y===e&&this._z===r}multiplyInPlace(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._isDirty=!0,this}multiply(t){return this.multiplyByFloats(t._x,t._y,t._z)}multiplyToRef(t,e){return e.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}multiplyByFloats(t,e,r){return new this.constructor(this._x*t,this._y*e,this._z*r)}divide(t){return new this.constructor(this._x/t._x,this._y/t._y,this._z/t._z)}divideToRef(t,e){return e.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}minimizeInPlaceFromFloats(t,e,r){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),r<this._z&&(this.z=r),this}maximizeInPlaceFromFloats(t,e,r){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),r>this._z&&(this.z=r),this}isNonUniformWithinEpsilon(t){let e=Math.abs(this._x),r=Math.abs(this._y);if(!i.R.WithinEpsilon(e,r,t))return!0;let s=Math.abs(this._z);return!(i.R.WithinEpsilon(e,s,t)&&i.R.WithinEpsilon(r,s,t))}get isNonUniform(){let t=Math.abs(this._x),e=Math.abs(this._y);if(t!==e)return!0;let r=Math.abs(this._z);return t!==r}floor(){return new this.constructor(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}fract(){return new this.constructor(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z}get hasAZeroComponent(){return this._x*this._y*this._z==0}normalize(){return this.normalizeFromLength(this.length())}reorderInPlace(t){return"xyz"===(t=t.toLowerCase())||(MathTmp.Vector3[0].copyFrom(this),["x","y","z"].forEach((e,r)=>{this[e]=MathTmp.Vector3[0][t[r]]})),this}rotateByQuaternionToRef(t,e){return t.toRotationMatrix(MathTmp.Matrix[0]),Vector3.TransformCoordinatesToRef(this,MathTmp.Matrix[0],e),e}rotateByQuaternionAroundPointToRef(t,e,r){return this.subtractToRef(e,MathTmp.Vector3[0]),MathTmp.Vector3[0].rotateByQuaternionToRef(t,MathTmp.Vector3[0]),e.addToRef(MathTmp.Vector3[0],r),r}cross(t){let e=new this.constructor;return Vector3.CrossToRef(this,t,e)}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){let t=new this.constructor(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){let e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/e,t)}clone(){return new this.constructor(this._x,this._y,this._z)}copyFrom(t){return this.copyFromFloats(t._x,t._y,t._z)}copyFromFloats(t,e,r){return this._x=t,this._y=e,this._z=r,this._isDirty=!0,this}set(t,e,r){return this.copyFromFloats(t,e,r)}setAll(t){return this._x=this._y=this._z=t,this._isDirty=!0,this}static GetClipFactor(t,e,r,i){let s=Vector3.Dot(t,r)-i,o=Vector3.Dot(e,r)-i;return s/(s-o)}static GetAngleBetweenVectors(t,e,r){let s=t.normalizeToRef(MathTmp.Vector3[1]),o=e.normalizeToRef(MathTmp.Vector3[2]),a=Vector3.Dot(s,o);a=i.R.Clamp(a,-1,1);let n=Math.acos(a),h=MathTmp.Vector3[3];return(Vector3.CrossToRef(s,o,h),Vector3.Dot(h,r)>0)?isNaN(n)?0:n:isNaN(n)?-Math.PI:-Math.acos(a)}static GetAngleBetweenVectorsOnPlane(t,e,r){MathTmp.Vector3[0].copyFrom(t);let s=MathTmp.Vector3[0];MathTmp.Vector3[1].copyFrom(e);let o=MathTmp.Vector3[1];MathTmp.Vector3[2].copyFrom(r);let a=MathTmp.Vector3[2],n=MathTmp.Vector3[3],h=MathTmp.Vector3[4];s.normalize(),o.normalize(),a.normalize(),Vector3.CrossToRef(a,s,n),Vector3.CrossToRef(n,a,h);let c=Math.atan2(Vector3.Dot(o,n),Vector3.Dot(o,h));return i.R.NormalizeRadians(c)}static PitchYawRollToMoveBetweenPointsToRef(t,e,r){let i=TmpVectors.Vector3[0];return e.subtractToRef(t,i),r._y=Math.atan2(i.x,i.z)||0,r._x=Math.atan2(Math.sqrt(i.x**2+i.z**2),i.y)||0,r._z=0,r._isDirty=!0,r}static PitchYawRollToMoveBetweenPoints(t,e){let r=Vector3.Zero();return Vector3.PitchYawRollToMoveBetweenPointsToRef(t,e,r)}static SlerpToRef(t,e,r,o){let a,n;r=i.R.Clamp(r,0,1);let h=MathTmp.Vector3[0],c=MathTmp.Vector3[1];h.copyFrom(t);let _=h.length();h.normalizeFromLength(_),c.copyFrom(e);let l=c.length();c.normalizeFromLength(l);let u=Vector3.Dot(h,c);if(u<1-s.kn){let t=Math.acos(u),e=1/Math.sin(t);a=Math.sin((1-r)*t)*e,n=Math.sin(r*t)*e}else a=1-r,n=r;return h.scaleInPlace(a),c.scaleInPlace(n),o.copyFrom(h).addInPlace(c),o.scaleInPlace(i.R.Lerp(_,l,r)),o}static SmoothToRef(t,e,r,i,s){return Vector3.SlerpToRef(t,e,0===i?1:r/i,s),s}static FromArray(t,e=0){return new Vector3(t[e],t[e+1],t[e+2])}static FromFloatArray(t,e){return Vector3.FromArray(t,e)}static FromArrayToRef(t,e,r){return r._x=t[e],r._y=t[e+1],r._z=t[e+2],r._isDirty=!0,r}static FromFloatArrayToRef(t,e,r){return Vector3.FromArrayToRef(t,e,r)}static FromFloatsToRef(t,e,r,i){return i.copyFromFloats(t,e,r),i}static Zero(){return new Vector3(0,0,0)}static One(){return new Vector3(1,1,1)}static Up(){return new Vector3(0,1,0)}static get UpReadOnly(){return Vector3._UpReadOnly}static get DownReadOnly(){return Vector3._DownReadOnly}static get RightReadOnly(){return Vector3._RightReadOnly}static get LeftReadOnly(){return Vector3._LeftReadOnly}static get LeftHandedForwardReadOnly(){return Vector3._LeftHandedForwardReadOnly}static get RightHandedForwardReadOnly(){return Vector3._RightHandedForwardReadOnly}static get LeftHandedBackwardReadOnly(){return Vector3._LeftHandedBackwardReadOnly}static get RightHandedBackwardReadOnly(){return Vector3._RightHandedBackwardReadOnly}static get ZeroReadOnly(){return Vector3._ZeroReadOnly}static get OneReadOnly(){return Vector3._OneReadOnly}static Down(){return new Vector3(0,-1,0)}static Forward(t=!1){return new Vector3(0,0,t?-1:1)}static Backward(t=!1){return new Vector3(0,0,t?1:-1)}static Right(){return new Vector3(1,0,0)}static Left(){return new Vector3(-1,0,0)}static Random(t=0,e=1){return new Vector3(i.R.RandomRange(t,e),i.R.RandomRange(t,e),i.R.RandomRange(t,e))}static TransformCoordinates(t,e){let r=Vector3.Zero();return Vector3.TransformCoordinatesToRef(t,e,r),r}static TransformCoordinatesToRef(t,e,r){return Vector3.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,r),r}static TransformCoordinatesFromFloatsToRef(t,e,r,i,s){let o=i.m,a=t*o[0]+e*o[4]+r*o[8]+o[12],n=t*o[1]+e*o[5]+r*o[9]+o[13],h=t*o[2]+e*o[6]+r*o[10]+o[14],c=1/(t*o[3]+e*o[7]+r*o[11]+o[15]);return s._x=a*c,s._y=n*c,s._z=h*c,s._isDirty=!0,s}static TransformNormal(t,e){let r=Vector3.Zero();return Vector3.TransformNormalToRef(t,e,r),r}static TransformNormalToRef(t,e,r){return this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,r),r}static TransformNormalFromFloatsToRef(t,e,r,i,s){let o=i.m;return s._x=t*o[0]+e*o[4]+r*o[8],s._y=t*o[1]+e*o[5]+r*o[9],s._z=t*o[2]+e*o[6]+r*o[10],s._isDirty=!0,s}static CatmullRom(t,e,r,i,s){let o=s*s,a=s*o,n=.5*(2*e._x+(-t._x+r._x)*s+(2*t._x-5*e._x+4*r._x-i._x)*o+(-t._x+3*e._x-3*r._x+i._x)*a),h=.5*(2*e._y+(-t._y+r._y)*s+(2*t._y-5*e._y+4*r._y-i._y)*o+(-t._y+3*e._y-3*r._y+i._y)*a),c=.5*(2*e._z+(-t._z+r._z)*s+(2*t._z-5*e._z+4*r._z-i._z)*o+(-t._z+3*e._z-3*r._z+i._z)*a);return new t.constructor(n,h,c)}static Clamp(t,e,r){let i=new t.constructor;return Vector3.ClampToRef(t,e,r,i),i}static ClampToRef(t,e,r,i){let s=t._x;s=(s=s>r._x?r._x:s)<e._x?e._x:s;let o=t._y;o=(o=o>r._y?r._y:o)<e._y?e._y:o;let a=t._z;return a=(a=a>r._z?r._z:a)<e._z?e._z:a,i.copyFromFloats(s,o,a),i}static CheckExtends(t,e,r){e.minimizeInPlace(t),r.maximizeInPlace(t)}static Hermite(t,e,r,i,s){let o=s*s,a=s*o,n=2*a-3*o+1,h=-2*a+3*o,c=a-2*o+s,_=a-o,l=t._x*n+r._x*h+e._x*c+i._x*_,u=t._y*n+r._y*h+e._y*c+i._y*_,y=t._z*n+r._z*h+e._z*c+i._z*_;return new t.constructor(l,u,y)}static Hermite1stDerivative(t,e,r,i,s){let o=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,r,i,s,o),o}static Hermite1stDerivativeToRef(t,e,r,i,s,o){let a=s*s;return o._x=(a-s)*6*t._x+(3*a-4*s+1)*e._x+(-a+s)*6*r._x+(3*a-2*s)*i._x,o._y=(a-s)*6*t._y+(3*a-4*s+1)*e._y+(-a+s)*6*r._y+(3*a-2*s)*i._y,o._z=(a-s)*6*t._z+(3*a-4*s+1)*e._z+(-a+s)*6*r._z+(3*a-2*s)*i._z,o._isDirty=!0,o}static Lerp(t,e,r){let i=new t.constructor(0,0,0);return Vector3.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){return i._x=t._x+(e._x-t._x)*r,i._y=t._y+(e._y-t._y)*r,i._z=t._z+(e._z-t._z)*r,i._isDirty=!0,i}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z}static Cross(t,e){let r=new t.constructor;return Vector3.CrossToRef(t,e,r),r}static CrossToRef(t,e,r){let i=t._y*e._z-t._z*e._y,s=t._z*e._x-t._x*e._z,o=t._x*e._y-t._y*e._x;return r.copyFromFloats(i,s,o),r}static Normalize(t){let e=Vector3.Zero();return Vector3.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){return t.normalizeToRef(e),e}static Project(t,e,r,i){let s=new t.constructor;return Vector3.ProjectToRef(t,e,r,i,s),s}static ProjectToRef(t,e,r,i,s){let o=i.width,a=i.height,n=i.x,h=i.y,c=MathTmp.Matrix[1];Matrix.FromValuesToRef(o/2,0,0,0,0,-a/2,0,0,0,0,.5,0,n+o/2,a/2+h,.5,1,c);let _=MathTmp.Matrix[0];return e.multiplyToRef(r,_),_.multiplyToRef(c,_),Vector3.TransformCoordinatesToRef(t,_,s),s}static Reflect(t,e){return this.ReflectToRef(t,e,new Vector3)}static ReflectToRef(t,e,r){let i=TmpVectors.Vector3[0];return i.copyFrom(e).scaleInPlace(2*Vector3.Dot(t,e)),r.copyFrom(t).subtractInPlace(i)}static _UnprojectFromInvertedMatrixToRef(t,e,r){Vector3.TransformCoordinatesToRef(t,e,r);let s=e.m,o=t._x*s[3]+t._y*s[7]+t._z*s[11]+s[15];return i.R.WithinEpsilon(o,1)&&r.scaleInPlace(1/o),r}static UnprojectFromTransform(t,e,r,i,s){return this.Unproject(t,e,r,i,s,Matrix.IdentityReadOnly)}static Unproject(t,e,r,i,s,o){let a=new t.constructor;return Vector3.UnprojectToRef(t,e,r,i,s,o,a),a}static UnprojectToRef(t,e,r,i,s,o,a){return Vector3.UnprojectFloatsToRef(t._x,t._y,t._z,e,r,i,s,o,a),a}static UnprojectFloatsToRef(t,e,r,i,s,o,a,n,c){var _;let l=MathTmp.Matrix[0];o.multiplyToRef(a,l),l.multiplyToRef(n,l),l.invert();let u=MathTmp.Vector3[0];return u.x=t/i*2-1,u.y=-(e/s*2-1),(null===(_=h.l.LastCreatedEngine)||void 0===_?void 0:_.isNDCHalfZRange)?u.z=r:u.z=2*r-1,Vector3._UnprojectFromInvertedMatrixToRef(u,l,c),c}static Minimize(t,e){let r=new t.constructor;return r.copyFrom(t),r.minimizeInPlace(e),r}static Maximize(t,e){let r=new t.constructor;return r.copyFrom(t),r.maximizeInPlace(e),r}static Distance(t,e){return Math.sqrt(Vector3.DistanceSquared(t,e))}static DistanceSquared(t,e){let r=t._x-e._x,i=t._y-e._y,s=t._z-e._z;return r*r+i*i+s*s}static ProjectOnTriangleToRef(t,e,r,o,a){let n,h,c;let _=MathTmp.Vector3[0],l=MathTmp.Vector3[1],u=MathTmp.Vector3[2],y=MathTmp.Vector3[3],m=MathTmp.Vector3[4];r.subtractToRef(e,_),o.subtractToRef(e,l),o.subtractToRef(r,u);let x=_.length(),R=l.length(),T=u.length();if(x<s.kn||R<s.kn||T<s.kn)return a.copyFrom(e),Vector3.Distance(t,e);t.subtractToRef(e,m),Vector3.CrossToRef(_,l,y);let f=y.length();if(f<s.kn)return a.copyFrom(e),Vector3.Distance(t,e);y.normalizeFromLength(f);let d=m.length();if(d<s.kn)return a.copyFrom(e),0;m.normalizeFromLength(d);let p=Vector3.Dot(y,m),z=MathTmp.Vector3[5],M=MathTmp.Vector3[6];z.copyFrom(y).scaleInPlace(-d*p),M.copyFrom(t).addInPlace(z);let w=MathTmp.Vector3[4],F=MathTmp.Vector3[5],V=MathTmp.Vector3[7],I=MathTmp.Vector3[8];w.copyFrom(_).scaleInPlace(1/x),I.copyFrom(l).scaleInPlace(1/R),w.addInPlace(I).scaleInPlace(-1),F.copyFrom(_).scaleInPlace(-1/x),I.copyFrom(u).scaleInPlace(1/T),F.addInPlace(I).scaleInPlace(-1),V.copyFrom(u).scaleInPlace(-1/T),I.copyFrom(l).scaleInPlace(-1/R),V.addInPlace(I).scaleInPlace(-1);let g=MathTmp.Vector3[9];g.copyFrom(M).subtractInPlace(e),Vector3.CrossToRef(w,g,I),n=Vector3.Dot(I,y);let A=n;g.copyFrom(M).subtractInPlace(r),Vector3.CrossToRef(F,g,I),n=Vector3.Dot(I,y);let D=n;g.copyFrom(M).subtractInPlace(o),Vector3.CrossToRef(V,g,I),n=Vector3.Dot(I,y);let P=n,C=MathTmp.Vector3[10];A>0&&D<0?(C.copyFrom(_),h=e,c=r):D>0&&P<0?(C.copyFrom(u),h=r,c=o):(C.copyFrom(l).scaleInPlace(-1),h=o,c=e);let L=MathTmp.Vector3[9],O=MathTmp.Vector3[4];h.subtractToRef(M,I),c.subtractToRef(M,L),Vector3.CrossToRef(I,L,O);let H=0>Vector3.Dot(O,y);if(!H)return a.copyFrom(M),Math.abs(d*p);let k=MathTmp.Vector3[5];Vector3.CrossToRef(C,O,k),k.normalize();let v=MathTmp.Vector3[9];v.copyFrom(h).subtractInPlace(M);let Q=v.length();if(Q<s.kn)return a.copyFrom(h),Vector3.Distance(t,h);v.normalizeFromLength(Q);let S=Vector3.Dot(k,v),B=MathTmp.Vector3[7];B.copyFrom(M).addInPlace(k.scaleInPlace(Q*S)),I.copyFrom(B).subtractInPlace(h),d=C.length(),C.normalizeFromLength(d);let b=Vector3.Dot(I,C)/Math.max(d,s.kn);return b=i.R.Clamp(b,0,1),B.copyFrom(h).addInPlace(C.scaleInPlace(b*d)),a.copyFrom(B),Vector3.Distance(t,B)}static Center(t,e){return Vector3.CenterToRef(t,e,Vector3.Zero())}static CenterToRef(t,e,r){return r.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)}static RotationFromAxis(t,e,r){let i=new t.constructor;return Vector3.RotationFromAxisToRef(t,e,r,i),i}static RotationFromAxisToRef(t,e,r,i){let s=MathTmp.Quaternion[0];return Quaternion.RotationQuaternionFromAxisToRef(t,e,r,s),s.toEulerAnglesToRef(i),i}};Vector3._UpReadOnly=Vector3.Up(),Vector3._DownReadOnly=Vector3.Down(),Vector3._LeftHandedForwardReadOnly=Vector3.Forward(!1),Vector3._RightHandedForwardReadOnly=Vector3.Forward(!0),Vector3._LeftHandedBackwardReadOnly=Vector3.Backward(!1),Vector3._RightHandedBackwardReadOnly=Vector3.Backward(!0),Vector3._RightReadOnly=Vector3.Right(),Vector3._LeftReadOnly=Vector3.Left(),Vector3._ZeroReadOnly=Vector3.Zero(),Vector3._OneReadOnly=Vector3.One();let Vector4=class Vector4{constructor(t=0,e=0,r=0,i=0){this.x=t,this.y=e,this.z=r,this.w=i}toString(){return`{X: ${this.x} Y: ${this.y} Z: ${this.z} W: ${this.w}}`}getClassName(){return"Vector4"}getHashCode(){let t=_ExtractAsInt(this.x),e=_ExtractAsInt(this.y),r=_ExtractAsInt(this.z),i=_ExtractAsInt(this.w),s=t;return 397*(s=397*(s=397*s^e)^r)^i}asArray(){let t=[];return this.toArray(t,0),t}toArray(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}fromArray(t,e=0){return Vector4.FromArrayToRef(t,e,this),this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}add(t){return new this.constructor(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,e}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,e}subtractFromFloats(t,e,r,i){return new this.constructor(this.x-t,this.y-e,this.z-r,this.w-i)}subtractFromFloatsToRef(t,e,r,i,s){return s.x=this.x-t,s.y=this.y-e,s.z=this.z-r,s.w=this.w-i,s}negate(){return new this.constructor(-this.x,-this.y,-this.z,-this.w)}negateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new this.constructor(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,e}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,e}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,e=s.kn){return t&&i.R.WithinEpsilon(this.x,t.x,e)&&i.R.WithinEpsilon(this.y,t.y,e)&&i.R.WithinEpsilon(this.z,t.z,e)&&i.R.WithinEpsilon(this.w,t.w,e)}equalsToFloats(t,e,r,i){return this.x===t&&this.y===e&&this.z===r&&this.w===i}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,e}multiplyByFloats(t,e,r,i){return new this.constructor(this.x*t,this.y*e,this.z*r,this.w*i)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,e}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){let t=this.length();return 0===t?this:this.scaleInPlace(1/t)}toVector3(){return new Vector3(this.x,this.y,this.z)}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this}set(t,e,r,i){return this.copyFromFloats(t,e,r,i)}setAll(t){return this.x=this.y=this.z=this.w=t,this}static FromArray(t,e){return e||(e=0),new Vector4(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,r){return r.x=t[e],r.y=t[e+1],r.z=t[e+2],r.w=t[e+3],r}static FromFloatArrayToRef(t,e,r){return Vector4.FromArrayToRef(t,e,r),r}static FromFloatsToRef(t,e,r,i,s){return s.x=t,s.y=e,s.z=r,s.w=i,s}static Zero(){return new Vector4(0,0,0,0)}static One(){return new Vector4(1,1,1,1)}static Random(t=0,e=1){return new Vector4(i.R.RandomRange(t,e),i.R.RandomRange(t,e),i.R.RandomRange(t,e),i.R.RandomRange(t,e))}static get ZeroReadOnly(){return Vector4._ZeroReadOnly}static Normalize(t){let e=Vector4.Zero();return Vector4.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){return e.copyFrom(t),e.normalize(),e}static Minimize(t,e){let r=new t.constructor;return r.copyFrom(t),r.minimizeInPlace(e),r}static Maximize(t,e){let r=new t.constructor;return r.copyFrom(t),r.maximizeInPlace(e),r}static Distance(t,e){return Math.sqrt(Vector4.DistanceSquared(t,e))}static DistanceSquared(t,e){let r=t.x-e.x,i=t.y-e.y,s=t.z-e.z,o=t.w-e.w;return r*r+i*i+s*s+o*o}static Center(t,e){return Vector4.CenterToRef(t,e,Vector4.Zero())}static CenterToRef(t,e,r){return r.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)}static TransformCoordinates(t,e){let r=Vector4.Zero();return Vector4.TransformCoordinatesToRef(t,e,r),r}static TransformCoordinatesToRef(t,e,r){return Vector4.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,r),r}static TransformCoordinatesFromFloatsToRef(t,e,r,i,s){let o=i.m,a=t*o[0]+e*o[4]+r*o[8]+o[12],n=t*o[1]+e*o[5]+r*o[9]+o[13],h=t*o[2]+e*o[6]+r*o[10]+o[14],c=t*o[3]+e*o[7]+r*o[11]+o[15];return s.x=a,s.y=n,s.z=h,s.w=c,s}static TransformNormal(t,e){let r=new t.constructor;return Vector4.TransformNormalToRef(t,e,r),r}static TransformNormalToRef(t,e,r){let i=e.m,s=t.x*i[0]+t.y*i[4]+t.z*i[8],o=t.x*i[1]+t.y*i[5]+t.z*i[9],a=t.x*i[2]+t.y*i[6]+t.z*i[10];return r.x=s,r.y=o,r.z=a,r.w=t.w,r}static TransformNormalFromFloatsToRef(t,e,r,i,s,o){let a=s.m;return o.x=t*a[0]+e*a[4]+r*a[8],o.y=t*a[1]+e*a[5]+r*a[9],o.z=t*a[2]+e*a[6]+r*a[10],o.w=i,o}static FromVector3(t,e=0){return new Vector4(t._x,t._y,t._z,e)}};Vector4._ZeroReadOnly=Vector4.Zero();let Quaternion=class Quaternion{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}get w(){return this._w}set w(t){this._w=t,this._isDirty=!0}constructor(t=0,e=0,r=0,i=1){this._isDirty=!0,this._x=t,this._y=e,this._z=r,this._w=i}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z} W: ${this._w}}`}getClassName(){return"Quaternion"}getHashCode(){let t=_ExtractAsInt(this._x),e=_ExtractAsInt(this._y),r=_ExtractAsInt(this._z),i=_ExtractAsInt(this._w),s=t;return 397*(s=397*(s=397*s^e)^r)^i}asArray(){return[this._x,this._y,this._z,this._w]}toArray(t,e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,this}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}equalsWithEpsilon(t,e=s.kn){return t&&i.R.WithinEpsilon(this._x,t._x,e)&&i.R.WithinEpsilon(this._y,t._y,e)&&i.R.WithinEpsilon(this._z,t._z,e)&&i.R.WithinEpsilon(this._w,t._w,e)}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copyFrom(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._isDirty=!0,this}copyFromFloats(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._w=i,this._isDirty=!0,this}set(t,e,r,i){return this.copyFromFloats(t,e,r,i)}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this._isDirty=!0,this}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t,this._w*t)}scaleToRef(t,e){return e._x=this._x*t,e._y=this._y*t,e._z=this._z*t,e._w=this._w*t,e._isDirty=!0,e}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this._isDirty=!0,this}scaleAndAddToRef(t,e){return e._x+=this._x*t,e._y+=this._y*t,e._z+=this._z*t,e._w+=this._w*t,e._isDirty=!0,e}multiply(t){let e=new this.constructor(0,0,0,1);return this.multiplyToRef(t,e),e}multiplyToRef(t,e){let r=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,i=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,s=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,o=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(r,i,s,o),e}multiplyInPlace(t){return this.multiplyToRef(t,this),this}conjugateToRef(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),t}conjugateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}conjugate(){return new this.constructor(-this._x,-this._y,-this._z,this._w)}invert(){let t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t}invertInPlace(){this.conjugateInPlace();let t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this.lengthSquared())}normalize(){let t=this.length();return 0===t||this.scaleInPlace(1/t),this}normalizeToNew(){let t=this.length();return 0===t?this.clone():this.scale(1/t)}toEulerAngles(){let t=Vector3.Zero();return this.toEulerAnglesToRef(t),t}toEulerAnglesToRef(t){let e=this._z,r=this._x,i=this._y,s=this._w,o=i*e-r*s;if(o<-.4999999)t._y=2*Math.atan2(i,s),t._x=Math.PI/2,t._z=0,t._isDirty=!0;else if(o>.4999999)t._y=2*Math.atan2(i,s),t._x=-Math.PI/2,t._z=0,t._isDirty=!0;else{let a=s*s,n=e*e,h=r*r,c=i*i;t._z=Math.atan2(2*(r*i+e*s),-n-h+c+a),t._x=Math.asin(-2*o),t._y=Math.atan2(2*(e*r+i*s),n-h-c+a),t._isDirty=!0}return t}toRotationMatrix(t){return Matrix.FromQuaternionToRef(this,t),t}fromRotationMatrix(t){return Quaternion.FromRotationMatrixToRef(t,this),this}static FromRotationMatrix(t){let e=new Quaternion;return Quaternion.FromRotationMatrixToRef(t,e),e}static FromRotationMatrixToRef(t,e){let r;let i=t.m,s=i[0],o=i[4],a=i[8],n=i[1],h=i[5],c=i[9],_=i[2],l=i[6],u=i[10],y=s+h+u;return y>0?(r=.5/Math.sqrt(y+1),e._w=.25/r,e._x=(l-c)*r,e._y=(a-_)*r,e._z=(n-o)*r):s>h&&s>u?(r=2*Math.sqrt(1+s-h-u),e._w=(l-c)/r,e._x=.25*r,e._y=(o+n)/r,e._z=(a+_)/r):h>u?(r=2*Math.sqrt(1+h-s-u),e._w=(a-_)/r,e._x=(o+n)/r,e._y=.25*r,e._z=(c+l)/r):(r=2*Math.sqrt(1+u-s-h),e._w=(n-o)/r,e._x=(a+_)/r,e._y=(c+l)/r,e._z=.25*r),e._isDirty=!0,e}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w}static AreClose(t,e,r=.1){let i=Quaternion.Dot(t,e);return 1-i*i<=r}static SmoothToRef(t,e,r,s,o){let a=0===s?1:r/s;return a=i.R.Clamp(a,0,1),Quaternion.SlerpToRef(t,e,a,o),o}static Zero(){return new Quaternion(0,0,0,0)}static Inverse(t){return new t.constructor(-t._x,-t._y,-t._z,t._w)}static InverseToRef(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e}static Identity(){return new Quaternion(0,0,0,1)}static IsIdentity(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}static RotationAxis(t,e){return Quaternion.RotationAxisToRef(t,e,new Quaternion)}static RotationAxisToRef(t,e,r){let i=Math.sin(e/2);return t.normalize(),r._w=Math.cos(e/2),r._x=t._x*i,r._y=t._y*i,r._z=t._z*i,r._isDirty=!0,r}static FromArray(t,e){return e||(e=0),new Quaternion(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,r){return r._x=t[e],r._y=t[e+1],r._z=t[e+2],r._w=t[e+3],r._isDirty=!0,r}static FromEulerAngles(t,e,r){let i=new Quaternion;return Quaternion.RotationYawPitchRollToRef(e,t,r,i),i}static FromEulerAnglesToRef(t,e,r,i){return Quaternion.RotationYawPitchRollToRef(e,t,r,i),i}static FromEulerVector(t){let e=new Quaternion;return Quaternion.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromEulerVectorToRef(t,e){return Quaternion.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromUnitVectorsToRef(t,e,r,i=s.kn){let o=Vector3.Dot(t,e)+1;return o<i?Math.abs(t.x)>Math.abs(t.z)?r.set(-t.y,t.x,0,0):r.set(0,-t.z,t.y,0):(Vector3.CrossToRef(t,e,TmpVectors.Vector3[0]),r.set(TmpVectors.Vector3[0].x,TmpVectors.Vector3[0].y,TmpVectors.Vector3[0].z,o)),r.normalize()}static RotationYawPitchRoll(t,e,r){let i=new Quaternion;return Quaternion.RotationYawPitchRollToRef(t,e,r,i),i}static RotationYawPitchRollToRef(t,e,r,i){let s=.5*r,o=.5*e,a=.5*t,n=Math.sin(s),h=Math.cos(s),c=Math.sin(o),_=Math.cos(o),l=Math.sin(a),u=Math.cos(a);return i._x=u*c*h+l*_*n,i._y=l*_*h-u*c*n,i._z=u*_*n-l*c*h,i._w=u*_*h+l*c*n,i._isDirty=!0,i}static RotationAlphaBetaGamma(t,e,r){let i=new Quaternion;return Quaternion.RotationAlphaBetaGammaToRef(t,e,r,i),i}static RotationAlphaBetaGammaToRef(t,e,r,i){let s=(r+t)*.5,o=(r-t)*.5,a=.5*e;return i._x=Math.cos(o)*Math.sin(a),i._y=Math.sin(o)*Math.sin(a),i._z=Math.sin(s)*Math.cos(a),i._w=Math.cos(s)*Math.cos(a),i._isDirty=!0,i}static RotationQuaternionFromAxis(t,e,r){let i=new Quaternion(0,0,0,0);return Quaternion.RotationQuaternionFromAxisToRef(t,e,r,i),i}static RotationQuaternionFromAxisToRef(t,e,r,i){let s=MathTmp.Matrix[0];return Matrix.FromXYZAxesToRef(t.normalize(),e.normalize(),r.normalize(),s),Quaternion.FromRotationMatrixToRef(s,i),i}static FromLookDirectionLH(t,e){let r=new Quaternion;return Quaternion.FromLookDirectionLHToRef(t,e,r),r}static FromLookDirectionLHToRef(t,e,r){let i=MathTmp.Matrix[0];return Matrix.LookDirectionLHToRef(t,e,i),Quaternion.FromRotationMatrixToRef(i,r),r}static FromLookDirectionRH(t,e){let r=new Quaternion;return Quaternion.FromLookDirectionRHToRef(t,e,r),r}static FromLookDirectionRHToRef(t,e,r){let i=MathTmp.Matrix[0];return Matrix.LookDirectionRHToRef(t,e,i),Quaternion.FromRotationMatrixToRef(i,r)}static Slerp(t,e,r){let i=Quaternion.Identity();return Quaternion.SlerpToRef(t,e,r,i),i}static SlerpToRef(t,e,r,i){let s,o;let a=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,n=!1;if(a<0&&(n=!0,a=-a),a>.999999)o=1-r,s=n?-r:r;else{let t=Math.acos(a),e=1/Math.sin(t);o=Math.sin((1-r)*t)*e,s=n?-Math.sin(r*t)*e:Math.sin(r*t)*e}return i._x=o*t._x+s*e._x,i._y=o*t._y+s*e._y,i._z=o*t._z+s*e._z,i._w=o*t._w+s*e._w,i._isDirty=!0,i}static Hermite(t,e,r,i,s){let o=s*s,a=s*o,n=2*a-3*o+1,h=-2*a+3*o,c=a-2*o+s,_=a-o,l=t._x*n+r._x*h+e._x*c+i._x*_,u=t._y*n+r._y*h+e._y*c+i._y*_,y=t._z*n+r._z*h+e._z*c+i._z*_,m=t._w*n+r._w*h+e._w*c+i._w*_;return new t.constructor(l,u,y,m)}static Hermite1stDerivative(t,e,r,i,s){let o=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,r,i,s,o),o}static Hermite1stDerivativeToRef(t,e,r,i,s,o){let a=s*s;return o._x=(a-s)*6*t._x+(3*a-4*s+1)*e._x+(-a+s)*6*r._x+(3*a-2*s)*i._x,o._y=(a-s)*6*t._y+(3*a-4*s+1)*e._y+(-a+s)*6*r._y+(3*a-2*s)*i._y,o._z=(a-s)*6*t._z+(3*a-4*s+1)*e._z+(-a+s)*6*r._z+(3*a-2*s)*i._z,o._w=(a-s)*6*t._w+(3*a-4*s+1)*e._w+(-a+s)*6*r._w+(3*a-2*s)*i._w,o._isDirty=!0,o}};let Matrix=class Matrix{static get Use64Bits(){return n.Z.MatrixUse64Bits}get m(){return this._m}markAsUpdated(){this.updateFlag=Matrix._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}_updateIdentityStatus(t,e=!1,r=!1,i=!0){this._isIdentity=t,this._isIdentity3x2=t||r,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&i}constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,n.Z.MatrixTrackPrecisionChange&&n.Z.MatrixTrackedMatrices.push(this),this._m=new n.Z.MatrixCurrentType(16),this.markAsUpdated()}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;let t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]?this._isIdentity3x2=!1:0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;let t=this._m,e=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],n=t[6],h=t[7],c=t[8],_=t[9],l=t[10],u=t[11],y=t[12],m=t[13],x=t[14],R=t[15],T=l*R-x*u,f=_*R-m*u,d=_*x-m*l,p=c*R-y*u,z=c*x-l*y,M=c*m-y*_;return e*+(a*T-n*f+h*d)+-(r*(o*T-n*p+h*z))+i*+(o*f-a*p+h*M)+-(s*(o*d-a*z+n*M))}toString(){return`{${this.m[0]}, ${this.m[1]}, ${this.m[2]}, ${this.m[3]}
${this.m[4]}, ${this.m[5]}, ${this.m[6]}, ${this.m[7]}
${this.m[8]}, ${this.m[9]}, ${this.m[10]}, ${this.m[11]}
${this.m[12]}, ${this.m[13]}, ${this.m[14]}, ${this.m[15]}}`}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return Matrix.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){let e=new this.constructor;return this.addToRef(t,e),e}addToRef(t,e){let r=this._m,i=e._m,s=t.m;for(let t=0;t<16;t++)i[t]=r[t]+s[t];return e.markAsUpdated(),e}addToSelf(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]+=r[t];return this.markAsUpdated(),this}invertToRef(t){if(!0===this._isIdentity)return Matrix.IdentityToRef(t),t;let e=this._m,r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],n=e[5],h=e[6],c=e[7],_=e[8],l=e[9],u=e[10],y=e[11],m=e[12],x=e[13],R=e[14],T=e[15],f=u*T-R*y,d=l*T-x*y,p=l*R-x*u,z=_*T-m*y,M=_*R-u*m,w=_*x-m*l,F=+(n*f-h*d+c*p),V=-(a*f-h*z+c*M),I=+(a*d-n*z+c*w),g=-(a*p-n*M+h*w),A=r*F+i*V+s*I+o*g;if(0===A)return t.copyFrom(this),t;let D=1/A,P=h*T-R*c,C=n*T-x*c,L=n*R-x*h,O=a*T-m*c,H=a*R-m*h,k=a*x-m*n,v=h*y-u*c,Q=n*y-l*c,S=n*u-l*h,B=a*y-_*c,b=a*u-_*h,E=a*l-_*n;return Matrix.FromValuesToRef(F*D,-(i*f-s*d+o*p)*D,+(i*P-s*C+o*L)*D,-(i*v-s*Q+o*S)*D,V*D,+(r*f-s*z+o*M)*D,-(r*P-s*O+o*H)*D,+(r*v-s*B+o*b)*D,I*D,-(r*d-i*z+o*w)*D,+(r*C-i*O+o*k)*D,-(r*Q-i*B+o*E)*D,g*D,+(r*p-i*M+s*w)*D,-(r*L-i*H+s*k)*D,+(r*S-i*b+s*E)*D,t),t}addAtIndex(t,e){return this._m[t]+=e,this.markAsUpdated(),this}multiplyAtIndex(t,e){return this._m[t]*=e,this.markAsUpdated(),this}setTranslationFromFloats(t,e,r){return this._m[12]=t,this._m[13]=e,this._m[14]=r,this.markAsUpdated(),this}addTranslationFromFloats(t,e,r){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=r,this.markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}getTranslation(){return new Vector3(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],t}removeRotationAndScaling(){let t=this.m;return Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}multiply(t){let e=new this.constructor;return this.multiplyToRef(t,e),e}copyFrom(t){return t.copyToArray(this._m),this.updateFlag=t.updateFlag,this._updateIdentityStatus(t._isIdentity,t._isIdentityDirty,t._isIdentity3x2,t._isIdentity3x2Dirty),this}copyToArray(t,e=0){let r=this._m;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],this}multiplyToRef(t,e){return this._isIdentity?e.copyFrom(t):t._isIdentity?e.copyFrom(this):(this.multiplyToArray(t,e._m,0),e.markAsUpdated()),e}multiplyToArray(t,e,r){let i=this._m,s=t.m,o=i[0],a=i[1],n=i[2],h=i[3],c=i[4],_=i[5],l=i[6],u=i[7],y=i[8],m=i[9],x=i[10],R=i[11],T=i[12],f=i[13],d=i[14],p=i[15],z=s[0],M=s[1],w=s[2],F=s[3],V=s[4],I=s[5],g=s[6],A=s[7],D=s[8],P=s[9],C=s[10],L=s[11],O=s[12],H=s[13],k=s[14],v=s[15];return e[r]=o*z+a*V+n*D+h*O,e[r+1]=o*M+a*I+n*P+h*H,e[r+2]=o*w+a*g+n*C+h*k,e[r+3]=o*F+a*A+n*L+h*v,e[r+4]=c*z+_*V+l*D+u*O,e[r+5]=c*M+_*I+l*P+u*H,e[r+6]=c*w+_*g+l*C+u*k,e[r+7]=c*F+_*A+l*L+u*v,e[r+8]=y*z+m*V+x*D+R*O,e[r+9]=y*M+m*I+x*P+R*H,e[r+10]=y*w+m*g+x*C+R*k,e[r+11]=y*F+m*A+x*L+R*v,e[r+12]=T*z+f*V+d*D+p*O,e[r+13]=T*M+f*I+d*P+p*H,e[r+14]=T*w+f*g+d*C+p*k,e[r+15]=T*F+f*A+d*L+p*v,this}equals(t){if(!t)return!1;if((this._isIdentity||t._isIdentity)&&!this._isIdentityDirty&&!t._isIdentityDirty)return this._isIdentity&&t._isIdentity;let e=this.m,r=t.m;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}clone(){let t=new this.constructor;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=_ExtractAsInt(this._m[0]);for(let e=1;e<16;e++)t=397*t^_ExtractAsInt(this._m[e]);return t}decomposeToTransformNode(t){return t.rotationQuaternion=t.rotationQuaternion||new Quaternion,this.decompose(t.scaling,t.rotationQuaternion,t.position)}decompose(t,e,r,i){if(this._isIdentity)return r&&r.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;let s=this._m;if(r&&r.copyFromFloats(s[12],s[13],s[14]),(t=t||MathTmp.Vector3[0]).x=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),t.y=Math.sqrt(s[4]*s[4]+s[5]*s[5]+s[6]*s[6]),t.z=Math.sqrt(s[8]*s[8]+s[9]*s[9]+s[10]*s[10]),i){let e=i.absoluteScaling.x<0?-1:1,r=i.absoluteScaling.y<0?-1:1,s=i.absoluteScaling.z<0?-1:1;t.x*=e,t.y*=r,t.z*=s}else 0>=this.determinant()&&(t.y*=-1);if(0===t._x||0===t._y||0===t._z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){let r=1/t._x,i=1/t._y,o=1/t._z;Matrix.FromValuesToRef(s[0]*r,s[1]*r,s[2]*r,0,s[4]*i,s[5]*i,s[6]*i,0,s[8]*o,s[9]*o,s[10]*o,0,0,0,0,1,MathTmp.Matrix[0]),Quaternion.FromRotationMatrixToRef(MathTmp.Matrix[0],e)}return!0}getRow(t){if(t<0||t>3)return null;let e=4*t;return new Vector4(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}getRowToRef(t,e){if(t>=0&&t<3){let r=4*t;e.x=this._m[r+0],e.y=this._m[r+1],e.z=this._m[r+2],e.w=this._m[r+3]}return e}setRow(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}transpose(){let t=new this.constructor;return Matrix.TransposeToRef(this,t),t}transposeToRef(t){return Matrix.TransposeToRef(this,t),t}setRowFromFloats(t,e,r,i,s){if(t<0||t>3)return this;let o=4*t;return this._m[o+0]=e,this._m[o+1]=r,this._m[o+2]=i,this._m[o+3]=s,this.markAsUpdated(),this}scale(t){let e=new this.constructor;return this.scaleToRef(t,e),e}scaleToRef(t,e){for(let r=0;r<16;r++)e._m[r]=this._m[r]*t;return e.markAsUpdated(),e}scaleAndAddToRef(t,e){for(let r=0;r<16;r++)e._m[r]+=this._m[r]*t;return e.markAsUpdated(),e}toNormalMatrix(t){let e=MathTmp.Matrix[0];this.invertToRef(e),e.transposeToRef(t);let r=t._m;return Matrix.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,t),t}getRotationMatrix(){let t=new this.constructor;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){let e=MathTmp.Vector3[0];if(!this.decompose(e))return Matrix.IdentityToRef(t),t;let r=this._m,i=1/e._x,s=1/e._y,o=1/e._z;return Matrix.FromValuesToRef(r[0]*i,r[1]*i,r[2]*i,0,r[4]*s,r[5]*s,r[6]*s,0,r[8]*o,r[9]*o,r[10]*o,0,0,0,0,1,t),t}toggleModelMatrixHandInPlace(){let t=this._m;return t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated(),this}toggleProjectionMatrixHandInPlace(){let t=this._m;return t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated(),this}static FromArray(t,e=0){let r=new Matrix;return Matrix.FromArrayToRef(t,e,r),r}static FromArrayToRef(t,e,r){for(let i=0;i<16;i++)r._m[i]=t[i+e];return r.markAsUpdated(),r}static FromFloat32ArrayToRefScaled(t,e,r,i){for(let s=0;s<16;s++)i._m[s]=t[s+e]*r;return i.markAsUpdated(),i}static get IdentityReadOnly(){return Matrix._IdentityReadOnly}static FromValuesToRef(t,e,r,i,s,o,a,n,h,c,_,l,u,y,m,x,R){let T=R._m;T[0]=t,T[1]=e,T[2]=r,T[3]=i,T[4]=s,T[5]=o,T[6]=a,T[7]=n,T[8]=h,T[9]=c,T[10]=_,T[11]=l,T[12]=u,T[13]=y,T[14]=m,T[15]=x,R.markAsUpdated()}static FromValues(t,e,r,i,s,o,a,n,h,c,_,l,u,y,m,x){let R=new Matrix,T=R._m;return T[0]=t,T[1]=e,T[2]=r,T[3]=i,T[4]=s,T[5]=o,T[6]=a,T[7]=n,T[8]=h,T[9]=c,T[10]=_,T[11]=l,T[12]=u,T[13]=y,T[14]=m,T[15]=x,R.markAsUpdated(),R}static Compose(t,e,r){let i=new Matrix;return Matrix.ComposeToRef(t,e,r,i),i}static ComposeToRef(t,e,r,i){let s=i._m,o=e._x,a=e._y,n=e._z,h=e._w,c=o+o,_=a+a,l=n+n,u=o*c,y=o*_,m=o*l,x=a*_,R=a*l,T=n*l,f=h*c,d=h*_,p=h*l,z=t._x,M=t._y,w=t._z;return s[0]=(1-(x+T))*z,s[1]=(y+p)*z,s[2]=(m-d)*z,s[3]=0,s[4]=(y-p)*M,s[5]=(1-(u+T))*M,s[6]=(R+f)*M,s[7]=0,s[8]=(m+d)*w,s[9]=(R-f)*w,s[10]=(1-(u+x))*w,s[11]=0,s[12]=r._x,s[13]=r._y,s[14]=r._z,s[15]=1,i.markAsUpdated(),i}static Identity(){let t=Matrix.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){return Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0),t}static Zero(){let t=Matrix.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){let e=new Matrix;return Matrix.RotationXToRef(t,e),e}static Invert(t){let e=new t.constructor;return t.invertToRef(e),e}static RotationXToRef(t,e){let r=Math.sin(t),i=Math.cos(t);return Matrix.FromValuesToRef(1,0,0,0,0,i,r,0,0,-r,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r),e}static RotationY(t){let e=new Matrix;return Matrix.RotationYToRef(t,e),e}static RotationYToRef(t,e){let r=Math.sin(t),i=Math.cos(t);return Matrix.FromValuesToRef(i,0,-r,0,0,1,0,0,r,0,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r),e}static RotationZ(t){let e=new Matrix;return Matrix.RotationZToRef(t,e),e}static RotationZToRef(t,e){let r=Math.sin(t),i=Math.cos(t);return Matrix.FromValuesToRef(i,r,0,0,-r,i,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r),e}static RotationAxis(t,e){let r=new Matrix;return Matrix.RotationAxisToRef(t,e,r),r}static RotationAxisToRef(t,e,r){let i=Math.sin(-e),s=Math.cos(-e),o=1-s;t.normalize();let a=r._m;return a[0]=t._x*t._x*o+s,a[1]=t._x*t._y*o-t._z*i,a[2]=t._x*t._z*o+t._y*i,a[3]=0,a[4]=t._y*t._x*o+t._z*i,a[5]=t._y*t._y*o+s,a[6]=t._y*t._z*o-t._x*i,a[7]=0,a[8]=t._z*t._x*o-t._y*i,a[9]=t._z*t._y*o+t._x*i,a[10]=t._z*t._z*o+s,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,r.markAsUpdated(),r}static RotationAlignToRef(t,e,r,i=!1){let o=Vector3.Dot(e,t),a=r._m;if(o<-1+s.kn)a[0]=-1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i?1:-1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i?-1:1,a[11]=0;else{let r=Vector3.Cross(e,t),i=1/(1+o);a[0]=r._x*r._x*i+o,a[1]=r._y*r._x*i-r._z,a[2]=r._z*r._x*i+r._y,a[3]=0,a[4]=r._x*r._y*i+r._z,a[5]=r._y*r._y*i+o,a[6]=r._z*r._y*i-r._x,a[7]=0,a[8]=r._x*r._z*i-r._y,a[9]=r._y*r._z*i+r._x,a[10]=r._z*r._z*i+o,a[11]=0}return a[12]=0,a[13]=0,a[14]=0,a[15]=1,r.markAsUpdated(),r}static RotationYawPitchRoll(t,e,r){let i=new Matrix;return Matrix.RotationYawPitchRollToRef(t,e,r,i),i}static RotationYawPitchRollToRef(t,e,r,i){return Quaternion.RotationYawPitchRollToRef(t,e,r,MathTmp.Quaternion[0]),MathTmp.Quaternion[0].toRotationMatrix(i),i}static Scaling(t,e,r){let i=new Matrix;return Matrix.ScalingToRef(t,e,r,i),i}static ScalingToRef(t,e,r,i){return Matrix.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1,i),i._updateIdentityStatus(1===t&&1===e&&1===r),i}static Translation(t,e,r){let i=new Matrix;return Matrix.TranslationToRef(t,e,r,i),i}static TranslationToRef(t,e,r,i){return Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1,i),i._updateIdentityStatus(0===t&&0===e&&0===r),i}static Lerp(t,e,r){let i=new t.constructor;return Matrix.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){let s=i._m,o=t.m,a=e.m;for(let t=0;t<16;t++)s[t]=o[t]*(1-r)+a[t]*r;return i.markAsUpdated(),i}static DecomposeLerp(t,e,r){let i=new t.constructor;return Matrix.DecomposeLerpToRef(t,e,r,i),i}static DecomposeLerpToRef(t,e,r,i){let s=MathTmp.Vector3[0],o=MathTmp.Quaternion[0],a=MathTmp.Vector3[1];t.decompose(s,o,a);let n=MathTmp.Vector3[2],h=MathTmp.Quaternion[1],c=MathTmp.Vector3[3];e.decompose(n,h,c);let _=MathTmp.Vector3[4];Vector3.LerpToRef(s,n,r,_);let l=MathTmp.Quaternion[2];Quaternion.SlerpToRef(o,h,r,l);let u=MathTmp.Vector3[5];return Vector3.LerpToRef(a,c,r,u),Matrix.ComposeToRef(_,l,u,i),i}static LookAtLH(t,e,r){let i=new Matrix;return Matrix.LookAtLHToRef(t,e,r,i),i}static LookAtLHToRef(t,e,r,i){let s=MathTmp.Vector3[0],o=MathTmp.Vector3[1],a=MathTmp.Vector3[2];e.subtractToRef(t,a),a.normalize(),Vector3.CrossToRef(r,a,s);let n=s.lengthSquared();0===n?s.x=1:s.normalizeFromLength(Math.sqrt(n)),Vector3.CrossToRef(a,s,o),o.normalize();let h=-Vector3.Dot(s,t),c=-Vector3.Dot(o,t),_=-Vector3.Dot(a,t);Matrix.FromValuesToRef(s._x,o._x,a._x,0,s._y,o._y,a._y,0,s._z,o._z,a._z,0,h,c,_,1,i)}static LookAtRH(t,e,r){let i=new Matrix;return Matrix.LookAtRHToRef(t,e,r,i),i}static LookAtRHToRef(t,e,r,i){let s=MathTmp.Vector3[0],o=MathTmp.Vector3[1],a=MathTmp.Vector3[2];t.subtractToRef(e,a),a.normalize(),Vector3.CrossToRef(r,a,s);let n=s.lengthSquared();0===n?s.x=1:s.normalizeFromLength(Math.sqrt(n)),Vector3.CrossToRef(a,s,o),o.normalize();let h=-Vector3.Dot(s,t),c=-Vector3.Dot(o,t),_=-Vector3.Dot(a,t);return Matrix.FromValuesToRef(s._x,o._x,a._x,0,s._y,o._y,a._y,0,s._z,o._z,a._z,0,h,c,_,1,i),i}static LookDirectionLH(t,e){let r=new Matrix;return Matrix.LookDirectionLHToRef(t,e,r),r}static LookDirectionLHToRef(t,e,r){let i=MathTmp.Vector3[0];i.copyFrom(t),i.scaleInPlace(-1);let s=MathTmp.Vector3[1];return Vector3.CrossToRef(e,i,s),Matrix.FromValuesToRef(s._x,s._y,s._z,0,e._x,e._y,e._z,0,i._x,i._y,i._z,0,0,0,0,1,r),r}static LookDirectionRH(t,e){let r=new Matrix;return Matrix.LookDirectionRHToRef(t,e,r),r}static LookDirectionRHToRef(t,e,r){let i=MathTmp.Vector3[2];return Vector3.CrossToRef(e,t,i),Matrix.FromValuesToRef(i._x,i._y,i._z,0,e._x,e._y,e._z,0,t._x,t._y,t._z,0,0,0,0,1,r),r}static OrthoLH(t,e,r,i,s){let o=new Matrix;return Matrix.OrthoLHToRef(t,e,r,i,o,s),o}static OrthoLHToRef(t,e,r,i,s,o){let a=2/t,n=2/e,h=2/(i-r),_=-(i+r)/(i-r);return Matrix.FromValuesToRef(a,0,0,0,0,n,0,0,0,0,h,0,0,0,_,1,s),o&&s.multiplyToRef(c,s),s._updateIdentityStatus(1===a&&1===n&&1===h&&0===_),s}static OrthoOffCenterLH(t,e,r,i,s,o,a){let n=new Matrix;return Matrix.OrthoOffCenterLHToRef(t,e,r,i,s,o,n,a),n}static OrthoOffCenterLHToRef(t,e,r,i,s,o,a,n){return Matrix.FromValuesToRef(2/(e-t),0,0,0,0,2/(i-r),0,0,0,0,2/(o-s),0,(t+e)/(t-e),(i+r)/(r-i),-(o+s)/(o-s),1,a),n&&a.multiplyToRef(c,a),a.markAsUpdated(),a}static ObliqueOffCenterLHToRef(t,e,r,i,s,o,a,n,h,c,_){let l=-a*Math.cos(n),u=-a*Math.sin(n);return Matrix.TranslationToRef(0,0,-h,MathTmp.Matrix[1]),Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,l,u,1,0,0,0,0,1,MathTmp.Matrix[0]),MathTmp.Matrix[1].multiplyToRef(MathTmp.Matrix[0],MathTmp.Matrix[0]),Matrix.TranslationToRef(0,0,h,MathTmp.Matrix[1]),MathTmp.Matrix[0].multiplyToRef(MathTmp.Matrix[1],MathTmp.Matrix[0]),Matrix.OrthoOffCenterLHToRef(t,e,r,i,s,o,c,_),MathTmp.Matrix[0].multiplyToRef(c,c),c}static OrthoOffCenterRH(t,e,r,i,s,o,a){let n=new Matrix;return Matrix.OrthoOffCenterRHToRef(t,e,r,i,s,o,n,a),n}static OrthoOffCenterRHToRef(t,e,r,i,s,o,a,n){return Matrix.OrthoOffCenterLHToRef(t,e,r,i,s,o,a,n),a._m[10]*=-1,a}static ObliqueOffCenterRHToRef(t,e,r,i,s,o,a,n,h,c,_){let l=a*Math.cos(n),u=a*Math.sin(n);return Matrix.TranslationToRef(0,0,h,MathTmp.Matrix[1]),Matrix.FromValuesToRef(1,0,0,0,0,1,0,0,l,u,1,0,0,0,0,1,MathTmp.Matrix[0]),MathTmp.Matrix[1].multiplyToRef(MathTmp.Matrix[0],MathTmp.Matrix[0]),Matrix.TranslationToRef(0,0,-h,MathTmp.Matrix[1]),MathTmp.Matrix[0].multiplyToRef(MathTmp.Matrix[1],MathTmp.Matrix[0]),Matrix.OrthoOffCenterRHToRef(t,e,r,i,s,o,c,_),MathTmp.Matrix[0].multiplyToRef(c,c),c}static PerspectiveLH(t,e,r,i,s,o=0){let a=new Matrix,n=Math.tan(o);return Matrix.FromValuesToRef(2*r/t,0,0,0,0,2*r/e,0,n,0,0,(i+r)/(i-r),1,0,0,-2*i*r/(i-r),0,a),s&&a.multiplyToRef(c,a),a._updateIdentityStatus(!1),a}static PerspectiveFovLH(t,e,r,i,s,o=0,a=!1){let n=new Matrix;return Matrix.PerspectiveFovLHToRef(t,e,r,i,n,!0,s,o,a),n}static PerspectiveFovLHToRef(t,e,r,i,s,o=!0,a,n=0,h=!1){let _=1/Math.tan(.5*t),l=o?_/e:_,u=o?_:_*e,y=h&&0===r?-1:0!==i?(i+r)/(i-r):1,m=h&&0===r?2*i:0!==i?-2*i*r/(i-r):-2*r,x=Math.tan(n);return Matrix.FromValuesToRef(l,0,0,0,0,u,0,x,0,0,y,1,0,0,m,0,s),a&&s.multiplyToRef(c,s),s._updateIdentityStatus(!1),s}static PerspectiveFovReverseLHToRef(t,e,r,i,s,o=!0,a,n=0){let h=1/Math.tan(.5*t),_=o?h/e:h,l=o?h:h*e,u=Math.tan(n);return Matrix.FromValuesToRef(_,0,0,0,0,l,0,u,0,0,-r,1,0,0,1,0,s),a&&s.multiplyToRef(c,s),s._updateIdentityStatus(!1),s}static PerspectiveFovRH(t,e,r,i,s,o=0,a=!1){let n=new Matrix;return Matrix.PerspectiveFovRHToRef(t,e,r,i,n,!0,s,o,a),n}static PerspectiveFovRHToRef(t,e,r,i,s,o=!0,a,n=0,h=!1){let _=1/Math.tan(.5*t),l=o?_/e:_,u=o?_:_*e,y=h&&0===r?1:0!==i?-(i+r)/(i-r):-1,m=h&&0===r?2*i:0!==i?-2*i*r/(i-r):-2*r,x=Math.tan(n);return Matrix.FromValuesToRef(l,0,0,0,0,u,0,x,0,0,y,-1,0,0,m,0,s),a&&s.multiplyToRef(c,s),s._updateIdentityStatus(!1),s}static PerspectiveFovReverseRHToRef(t,e,r,i,s,o=!0,a,n=0){let h=1/Math.tan(.5*t),_=o?h/e:h,l=o?h:h*e,u=Math.tan(n);return Matrix.FromValuesToRef(_,0,0,0,0,l,0,u,0,0,-r,-1,0,0,-1,0,s),a&&s.multiplyToRef(c,s),s._updateIdentityStatus(!1),s}static GetFinalMatrix(t,e,r,i,s,o){let a=t.width,n=t.height,h=t.x,c=t.y,_=Matrix.FromValues(a/2,0,0,0,0,-n/2,0,0,0,0,o-s,0,h+a/2,n/2+c,s,1),l=new e.constructor;return e.multiplyToRef(r,l),l.multiplyToRef(i,l),l.multiplyToRef(_,l)}static GetAsMatrix2x2(t){let e=t.m,r=[e[0],e[1],e[4],e[5]];return n.Z.MatrixUse64Bits?r:new Float32Array(r)}static GetAsMatrix3x3(t){let e=t.m,r=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return n.Z.MatrixUse64Bits?r:new Float32Array(r)}static Transpose(t){let e=new t.constructor;return Matrix.TransposeToRef(t,e),e}static TransposeToRef(t,e){let r=t.m,i=r[0],s=r[4],o=r[8],a=r[12],n=r[1],h=r[5],c=r[9],_=r[13],l=r[2],u=r[6],y=r[10],m=r[14],x=r[3],R=r[7],T=r[11],f=r[15],d=e._m;return d[0]=i,d[1]=s,d[2]=o,d[3]=a,d[4]=n,d[5]=h,d[6]=c,d[7]=_,d[8]=l,d[9]=u,d[10]=y,d[11]=m,d[12]=x,d[13]=R,d[14]=T,d[15]=f,e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty),e}static Reflection(t){let e=new Matrix;return Matrix.ReflectionToRef(t,e),e}static ReflectionToRef(t,e){t.normalize();let r=t.normal.x,i=t.normal.y,s=t.normal.z,o=-2*r,a=-2*i,n=-2*s;return Matrix.FromValuesToRef(o*r+1,a*r,n*r,0,o*i,a*i+1,n*i,0,o*s,a*s,n*s+1,0,o*t.d,a*t.d,n*t.d,1,e),e}static FromXYZAxesToRef(t,e,r,i){return Matrix.FromValuesToRef(t._x,t._y,t._z,0,e._x,e._y,e._z,0,r._x,r._y,r._z,0,0,0,0,1,i),i}static FromQuaternionToRef(t,e){let r=t._x*t._x,i=t._y*t._y,s=t._z*t._z,o=t._x*t._y,a=t._z*t._w,n=t._z*t._x,h=t._y*t._w,c=t._y*t._z,_=t._x*t._w;return e._m[0]=1-2*(i+s),e._m[1]=2*(o+a),e._m[2]=2*(n-h),e._m[3]=0,e._m[4]=2*(o-a),e._m[5]=1-2*(s+r),e._m[6]=2*(c+_),e._m[7]=0,e._m[8]=2*(n+h),e._m[9]=2*(c-_),e._m[10]=1-2*(i+r),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated(),e}};Matrix._UpdateFlagSeed=0,Matrix._IdentityReadOnly=Matrix.Identity();let MathTmp=class MathTmp{};MathTmp.Vector3=o.B.BuildTuple(11,Vector3.Zero),MathTmp.Matrix=o.B.BuildTuple(2,Matrix.Identity),MathTmp.Quaternion=o.B.BuildTuple(3,Quaternion.Zero);let TmpVectors=class TmpVectors{};TmpVectors.Vector2=o.B.BuildTuple(3,Vector2.Zero),TmpVectors.Vector3=o.B.BuildTuple(13,Vector3.Zero),TmpVectors.Vector4=o.B.BuildTuple(3,Vector4.Zero),TmpVectors.Quaternion=o.B.BuildTuple(2,Quaternion.Zero),TmpVectors.Matrix=o.B.BuildTuple(8,Matrix.Identity),(0,a.H)("BABYLON.Vector2",Vector2),(0,a.H)("BABYLON.Vector3",Vector3),(0,a.H)("BABYLON.Vector4",Vector4),(0,a.H)("BABYLON.Matrix",Matrix);let c=Matrix.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)}}]);